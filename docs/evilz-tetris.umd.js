(function(Je,ft){typeof exports=="object"&&typeof module!="undefined"?ft(exports):typeof define=="function"&&define.amd?define(["exports"],ft):(Je=typeof globalThis!="undefined"?globalThis:Je||self,ft(Je["evilz-tetris"]={}))})(this,function(Je){"use strict";var ft;(function(t){t[t.AllowHexSpecifier=512]="AllowHexSpecifier"})(ft||(ft={}));function Ut(t){return t===-2147483648?t:-t}const Le=Symbol("numeric");function vr(t){return typeof t=="number"||(t==null?void 0:t[Le])}function Uo(t,e){return typeof t=="number"?t<e?-1:t>e?1:0:t.CompareTo(e)}function Gn(t,e){return typeof t=="number"?t*e:t[Le]().multiply(e)}function pn(t,e){return typeof t=="number"?t.toFixed(e):t[Le]().toFixed(e)}function _n(t,e){return typeof t=="number"?t.toPrecision(e):t[Le]().toPrecision(e)}function wn(t,e){return typeof t=="number"?t.toExponential(e):t[Le]().toExponential(e)}function mn(t){return typeof t=="number"?(Number(t)>>>0).toString(16):t[Le]().toHex()}var se=null;try{se=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function $e(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}$e.prototype.GetHashCode=function(){let t=this.unsigned?1:0;return t=(t<<5)+t^this.high,t=(t<<5)+t^this.low,t},$e.prototype.Equals=function(t){return K(this,t)},$e.prototype.CompareTo=function(t){return zt(this,t)},$e.prototype.toString=function(t){return qt(this,t)},$e.prototype.toJSON=function(){return qt(this)},$e.prototype[Le]=function(){const t=this;return{multiply:e=>X(t,e),toPrecision:e=>String(t)+0 .toPrecision(e).substr(1),toExponential:e=>String(t)+0 .toExponential(e).substr(1),toFixed:e=>String(t)+0 .toFixed(e).substr(1),toHex:()=>qt(t.unsigned?t:oi(ni(t),!0),16)}},Object.defineProperty($e.prototype,"__isLong__",{value:!0});function ge(t){return(t&&t.__isLong__)===!0}var $r={},Mr={};function ht(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=Mr[t],r)?r:(n=M(t,(t|0)<0?-1:0,!0),s&&(Mr[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=$r[t],r)?r:(n=M(t,t<0?-1:0,!1),s&&($r[t]=n),n))}function pe(t,e){if(isNaN(t))return e?Ue:_e;if(e){if(t<0)return Ue;if(t>=Pr)return Wo}else{if(t<=-Tr)return oe;if(t+1>=Tr)return zo}return t<0?O(pe(-t,e)):M(t%dt|0,t/dt|0,e)}function M(t,e,n){return new $e(t,e,n)}var yn=Math.pow;function Ar(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return _e;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r=t.indexOf("-");if(r>0)throw Error("interior hyphen");if(r===0)return O(Ar(t.substring(1),e,n));for(var s=pe(yn(n,8)),o=_e,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);if(l<8){var u=pe(yn(n,l));o=et(X(o,u),pe(c))}else o=X(o,s),o=et(o,pe(c))}return o.unsigned=e,o}function Ve(t,e){return typeof t=="number"?pe(t,e):typeof t=="string"?Ar(t,e):M(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}var Ir=1<<16,jo=1<<24,dt=Ir*Ir,Pr=dt*dt,Tr=Pr/2,Nr=ht(jo),_e=ht(0),Ue=ht(0,!0),jt=ht(1),qo=ht(1,!0),xr=ht(-1),zo=M(4294967295|0,2147483647|0,!1),Wo=M(4294967295|0,4294967295|0,!0),oe=M(0,2147483648|0,!1);function gt(t){return t.unsigned?t.low>>>0:t.low}function En(t){return t.unsigned?(t.high>>>0)*dt+(t.low>>>0):t.high*dt+(t.low>>>0)}function qt(t,e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(Qe(t))return"0";if(ie(t))if(K(t,oe)){var n=pe(e),r=ke(t,n),s=pt(X(r,n),t);return qt(r,e)+gt(s).toString(e)}else return"-"+qt(O(t),e);for(var o=pe(yn(e,6),t.unsigned),i=t,l="";;){var c=ke(i,o),u=gt(pt(i,X(c,o)))>>>0,a=u.toString(e);if(i=c,Qe(i))return a+l;for(;a.length<6;)a="0"+a;l=""+a+l}}function Qe(t){return t.high===0&&t.low===0}function ie(t){return!t.unsigned&&t.high<0}function Fr(t){return(t.low&1)==1}function K(t,e){return ge(e)||(e=Ve(e)),t.unsigned!==e.unsigned&&t.high>>>31==1&&e.high>>>31==1?!1:t.high===e.high&&t.low===e.low}function kr(t,e){return zt(t,e)<0}function Ln(t,e){return zt(t,e)>0}function Zo(t,e){return zt(t,e)>=0}function zt(t,e){if(ge(e)||(e=Ve(e)),K(t,e))return 0;var n=ie(t),r=ie(e);return n&&!r?-1:!n&&r?1:t.unsigned?e.high>>>0>t.high>>>0||e.high===t.high&&e.low>>>0>t.low>>>0?-1:1:ie(pt(t,e))?-1:1}function O(t){return!t.unsigned&&K(t,oe)?oe:et(Xo(t),jt)}function et(t,e){ge(e)||(e=Ve(e));var n=t.high>>>16,r=t.high&65535,s=t.low>>>16,o=t.low&65535,i=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,a=0,h=0,f=0,d=0;return d+=o+u,f+=d>>>16,d&=65535,f+=s+c,h+=f>>>16,f&=65535,h+=r+l,a+=h>>>16,h&=65535,a+=n+i,a&=65535,M(f<<16|d,a<<16|h,t.unsigned)}function pt(t,e){return ge(e)||(e=Ve(e)),et(t,O(e))}function X(t,e){if(Qe(t))return t.unsigned?Ue:_e;if(ge(e)||(e=Ve(e)),se){var n=se.mul(t.low,t.high,e.low,e.high);return M(n,se.get_high(),t.unsigned)}if(Qe(e))return t.unsigned?Ue:_e;if(K(t,oe))return Fr(e)?oe:_e;if(K(e,oe))return Fr(t)?oe:_e;if(ie(t))return ie(e)?X(O(t),O(e)):O(X(O(t),e));if(ie(e))return O(X(t,O(e)));if(kr(t,Nr)&&kr(e,Nr))return pe(En(t)*En(e),t.unsigned);var r=t.high>>>16,s=t.high&65535,o=t.low>>>16,i=t.low&65535,l=e.high>>>16,c=e.high&65535,u=e.low>>>16,a=e.low&65535,h=0,f=0,d=0,p=0;return p+=i*a,d+=p>>>16,p&=65535,d+=o*a,f+=d>>>16,d&=65535,d+=i*u,f+=d>>>16,d&=65535,f+=s*a,h+=f>>>16,f&=65535,f+=o*u,h+=f>>>16,f&=65535,f+=i*c,h+=f>>>16,f&=65535,h+=r*a+s*u+o*c+i*l,h&=65535,M(d<<16|p,h<<16|f,t.unsigned)}function ke(t,e){if(ge(e)||(e=Ve(e)),Qe(e))throw Error("division by zero");if(se){if(!t.unsigned&&t.high===-2147483648&&e.low===-1&&e.high===-1)return t;var n=(t.unsigned?se.div_u:se.div_s)(t.low,t.high,e.low,e.high);return M(n,se.get_high(),t.unsigned)}if(Qe(t))return t.unsigned?Ue:_e;var r,s,o;if(t.unsigned){if(e.unsigned||(e=ti(e)),Ln(e,t))return Ue;if(Ln(e,ei(t,1)))return qo;o=Ue}else{if(K(t,oe)){if(K(e,jt)||K(e,xr))return oe;if(K(e,oe))return jt;var i=Qo(t,1);return r=Jo(ke(i,e),1),K(r,_e)?ie(e)?jt:xr:(s=pt(t,X(e,r)),o=et(r,ke(s,e)),o)}else if(K(e,oe))return t.unsigned?Ue:_e;if(ie(t))return ie(e)?ke(O(t),O(e)):O(ke(O(t),e));if(ie(e))return O(ke(t,O(e)));o=_e}for(s=t;Zo(s,e);){r=Math.max(1,Math.floor(En(s)/En(e)));for(var l=Math.ceil(Math.log(r)/Math.LN2),c=l<=48?1:yn(2,l-48),u=pe(r),a=X(u,e);ie(a)||Ln(a,s);)r-=c,u=pe(r,t.unsigned),a=X(u,e);Qe(u)&&(u=jt),o=et(o,u),s=pt(s,a)}return o}function Ko(t,e){if(ge(e)||(e=Ve(e)),se){var n=(t.unsigned?se.rem_u:se.rem_s)(t.low,t.high,e.low,e.high);return M(n,se.get_high(),t.unsigned)}return pt(t,X(ke(t,e),e))}function Xo(t){return M(~t.low,~t.high,t.unsigned)}function Yo(t,e){return ge(e)||(e=Ve(e)),M(t.low&e.low,t.high&e.high,t.unsigned)}function Jo(t,e){return ge(e)&&(e=gt(e)),(e&=63)==0?t:e<32?M(t.low<<e,t.high<<e|t.low>>>32-e,t.unsigned):M(0,t.low<<e-32,t.unsigned)}function Qo(t,e){return ge(e)&&(e=gt(e)),(e&=63)==0?t:e<32?M(t.low>>>e|t.high<<32-e,t.high>>e,t.unsigned):M(t.high>>e-32,t.high>=0?0:-1,t.unsigned)}function ei(t,e){if(ge(e)&&(e=gt(e)),e&=63,e===0)return t;var n=t.high;if(e<32){var r=t.low;return M(r>>>e|n<<32-e,n>>>e,t.unsigned)}else return M(e===32?n:n>>>e-32,0,t.unsigned)}function ti(t){return t.unsigned?t:M(t.low,t.high,!0)}function ni(t,e){return e?ri(t):si(t)}function ri(t){var e=t.high,n=t.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}function si(t){var e=t.high,n=t.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]}function oi(t,e,n){return n?ii(t,e):ci(t,e)}function ii(t,e){return new $e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)}function ci(t,e){return new $e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}const Y=et,ce=X,Be=ke,Br=Ko,li=O,_t=Yo,ui=K,Sn=zt,P=M,Me=gt;function N(t,e,n){let r=t,s=0;switch(n){case 0:r=t<<24>>24,s=r;break;case 4:r=t<<24>>>24;break;case 1:r=t<<16>>16,s=r;break;case 5:r=t<<16>>>16;break;case 2:r=t>>0,s=r;break;case 6:r=t>>>0;break}return M(r,s>>31,e)}function we(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function ai(t){return typeof t.CompareTo=="function"}function fi(t){return typeof t.Equals=="function"}function hi(t){return typeof t.GetHashCode=="function"}function di(t){return t!=null&&typeof t.Dispose=="function"}function bn(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}class gi{constructor(e){this.iter=e}["System.Collections.Generic.IEnumerator`1.get_Current"](){return this.current}["System.Collections.IEnumerator.get_Current"](){return this.current}["System.Collections.IEnumerator.MoveNext"](){const e=this.iter.next();return this.current=e.value,!e.done}["System.Collections.IEnumerator.Reset"](){throw new Error("JS iterators cannot be reset")}Dispose(){}}function x(t){return typeof t.GetEnumerator=="function"?t.GetEnumerator():new gi(t[Symbol.iterator]())}function Wt(t){return{[Symbol.iterator](){return this},next(){const e=t["System.Collections.IEnumerator.MoveNext"](),n=e?t["System.Collections.IEnumerator.get_Current"]():void 0;return{done:!e,value:n}}}}function De(t,e){let n=t.toString(10);for(;n.length<e;)n="0"+n;return n}function Dr(t){const e=t;return typeof e.offset=="number"?e.offset:t.kind===1?0:t.getTimezoneOffset()*-6e4}function pi(t,e){return t=t<0&&e!=null&&e!==10?4294967295+t+1:t,t.toString(e)}class je{static id(e){return je.idMap.has(e)||je.idMap.set(e,++je.count),je.idMap.get(e)}}je.idMap=new WeakMap,je.count=0;function _i(t){let e=0,n=5381;const r=t.length;for(;e<r;)n=n*33^t.charCodeAt(e++);return n}function Zt(t){return t*2654435761|0}function Kt(t){return t.length===0?0:t.reduce((e,n)=>(e<<5)+e^n)}function wi(t){return t.getTime()}function mi(t){const e=t.length,n=new Array(e);for(let r=0;r<e;r++)n[r]=me(t[r]);return Kt(n)}function me(t){if(t==null)return 0;switch(typeof t){case"boolean":return t?1:0;case"number":return Zt(t);case"string":return _i(t);default:{if(hi(t))return t.GetHashCode();if(we(t))return mi(t);if(t instanceof Date)return wi(t);if(Object.getPrototypeOf(t).constructor===Object){const e=Object.values(t).map(n=>me(n));return Kt(e)}else return Zt(je.id(t))}}}function yi(t,e,n){if(t==null)return e==null;if(e==null||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Or(t,e){return yi(t,e,J)}function Ei(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;n.sort(),r.sort();for(let s=0;s<n.length;s++)if(n[s]!==r[s]||!J(t[n[s]],e[r[s]]))return!1;return!0}function J(t,e){return t===e?!0:t==null?e==null:e==null||typeof t!="object"?!1:fi(t)?t.Equals(e):we(t)?we(e)&&Or(t,e):t instanceof Date?e instanceof Date&&Rr(t,e)===0:Object.getPrototypeOf(t).constructor===Object&&Ei(t,e)}function Rr(t,e){let n,r;return"offset"in t&&"offset"in e?(n=t.getTime(),r=e.getTime()):(n=t.getTime()+Dr(t),r=e.getTime()+Dr(e)),n===r?0:n<r?-1:1}function Cn(t,e){return t===e?0:t<e?-1:1}function Si(t,e,n){if(t==null)return e==null?0:1;if(e==null)return-1;if(t.length!==e.length)return t.length<e.length?-1:1;for(let r=0,s=0;r<t.length;r++)if(s=n(t[r],e[r]),s!==0)return s;return 0}function Vn(t,e){return Si(t,e,le)}function bi(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return n.length<r.length?-1:1;n.sort(),r.sort();for(let s=0,o=0;s<n.length;s++){const i=n[s];if(i!==r[s])return i<r[s]?-1:1;if(o=le(t[i],e[i]),o!==0)return o}return 0}function le(t,e){return t===e?0:t==null?e==null?0:-1:e==null?1:typeof t!="object"?t<e?-1:1:ai(t)?t.CompareTo(e):we(t)?we(e)?Vn(t,e):-1:t instanceof Date?e instanceof Date?Rr(t,e):-1:Object.getPrototypeOf(t).constructor===Object?bi(t,e):-1}function Hr(t,e,n){return t(e,n)>0?e:n}function Gr(t){const e={};return t(e),e}function Ci(t,e){return Math.floor(Math.random()*(e-t))+t}function vi(t){we(t)?t.splice(0):t.clear()}const Xt=Symbol("curried");function Un(t,e){if(e==null||e.length>1)return e;const n=(...r)=>{let s=e;for(let o=0;o<t;o++)s=s(r[o]);return s};return n[Xt]=e,n}function jn(t,e,n){return r=>e===1?n(...t.concat([r])):jn(t.concat([r]),e-1,n)}function vn(t,e){return e==null||e.length===1?e:Xt in e?e[Xt]:jn([],t,e)}function $i(t,e,n){if(e!=null)if(Xt in e){e=e[Xt];for(let r=0;r<n.length;r++)e=e(n[r]);return e}else return jn(n,t,e)}function Mi(t,e){function n(r,s,o,i){const l=o[i];if(l!==0){const u=l[0],a=l[1];u>1&&(s=vn(u,s)),a>1&&(s=Un(a,s))}const c=r(s);return i+1===o.length?c:u=>n(c,u,o,i+1)}return r=>n(t,r,e,0)}function qn(t){const e=t<0;t=Math.abs(t);const n=~~(t/36e5),r=t%36e5/6e4;return(e?"-":"+")+De(n,2)+":"+De(r,2)}function $n(t,e){const n=t.toISOString();return e==="first"?n.substring(0,n.indexOf("T")):n.substring(n.indexOf("T")+1,n.length-1)}function Ai(t,e){if(e)return t.toISOString();{const n=t.kind==null?!0:t.kind===2;return De(t.getFullYear(),4)+"-"+De(t.getMonth()+1,2)+"-"+De(t.getDate(),2)+"T"+De(t.getHours(),2)+":"+De(t.getMinutes(),2)+":"+De(t.getSeconds(),2)+"."+De(t.getMilliseconds(),3)+(n?qn(t.getTimezoneOffset()*-6e4):"")}}function Ii(t,e){const n=t.toISOString();return n.substring(0,n.length-1)+qn(e)}function Lr(t,e,n){return e.replace(/(\w)\1*/g,r=>{let s=Number.NaN;switch(r.substring(0,1)){case"y":const o=n?t.getUTCFullYear():t.getFullYear();s=r.length<4?o%100:o;break;case"M":s=(n?t.getUTCMonth():t.getMonth())+1;break;case"d":s=n?t.getUTCDate():t.getDate();break;case"H":s=n?t.getUTCHours():t.getHours();break;case"h":const i=n?t.getUTCHours():t.getHours();s=i>12?i%12:i;break;case"m":s=n?t.getUTCMinutes():t.getMinutes();break;case"s":s=n?t.getUTCSeconds():t.getSeconds();break;case"f":s=n?t.getUTCMilliseconds():t.getMilliseconds();break}return Number.isNaN(s)?r:s<10&&r.length>1?"0"+s:""+s})}function Pi(t,e){var n,r,s;const o=new Date(t.getTime()+((n=t.offset)!==null&&n!==void 0?n:0));if(typeof e!="string")return o.toISOString().replace(/\.\d+/,"").replace(/[A-Z]|\.\d+/g," ")+qn((r=t.offset)!==null&&r!==void 0?r:0);if(e.length===1)switch(e){case"D":case"d":return $n(o,"first");case"T":case"t":return $n(o,"second");case"O":case"o":return Ii(o,(s=t.offset)!==null&&s!==void 0?s:0);default:throw new Error("Unrecognized Date print format")}else return Lr(o,e,!0)}function Ti(t,e){const n=t.kind===1;if(typeof e!="string")return n?t.toUTCString():t.toLocaleString();if(e.length===1)switch(e){case"D":case"d":return n?$n(t,"first"):t.toLocaleDateString();case"T":case"t":return n?$n(t,"second"):t.toLocaleTimeString();case"O":case"o":return Ai(t,n);default:throw new Error("Unrecognized Date print format")}else return Lr(t,e,n)}function Vr(t,e,n){return t.offset!=null?Pi(t,e):Ti(t,e)}function Ni(t){let e=0,n="[";for(const r of t){if(e===0)n+=ye(r);else if(e===100){n+="; ...";break}else n+="; "+ye(r);e++}return n+"]"}function ye(t,e=0){if(t!=null&&typeof t=="object"){if(typeof t.toString=="function")return t.toString();if(Symbol.iterator in t)return Ni(t);{const n=Object.getPrototypeOf(t).constructor;return n===Object&&e<10?"{ "+Object.entries(t).map(([r,s])=>r+" = "+ye(s,e+1)).join(`
  `)+" }":n.name}}return String(t)}function xi(t,e){if(e.length===0)return t;{let n="",r=!0;return e.length===1?(n=ye(e[0]),r=n.indexOf(" ")>=0):n=e.map(s=>ye(s)).join(", "),t+(r?" (":" ")+n+(r?")":"")}}class Ee{get name(){return this.cases()[this.tag]}toJSON(){return this.fields.length===0?this.name:[this.name].concat(this.fields)}toString(){return xi(this.name,this.fields)}GetHashCode(){const e=this.fields.map(n=>me(n));return e.splice(0,0,Zt(this.tag)),Kt(e)}Equals(e){return this===e?!0:bn(this,e)&&this.tag===e.tag?Or(this.fields,e.fields):!1}CompareTo(e){return this===e?0:bn(this,e)?this.tag===e.tag?Vn(this.fields,e.fields):this.tag<e.tag?-1:1:-1}}function Fi(t){const e={},n=Object.keys(t);for(let r=0;r<n.length;r++)e[n[r]]=t[n[r]];return e}function ki(t){return"{ "+Object.entries(t).map(([e,n])=>e+" = "+ye(n)).join(`
  `)+" }"}function Bi(t){const e=Object.values(t).map(n=>me(n));return Kt(e)}function Di(t,e){if(t===e)return!0;if(bn(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++)if(!J(t[n[r]],e[n[r]]))return!1;return!0}else return!1}function Oi(t,e){if(t===e)return 0;if(bn(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++){const s=le(t[n[r]],e[n[r]]);if(s!==0)return s}return 0}else return-1}class ue{toJSON(){return Fi(this)}toString(){return ki(this)}GetHashCode(){return Bi(this)}Equals(e){return Di(this,e)}CompareTo(e){return Oi(this,e)}}class Mn{constructor(e,n){typeof n=="function"?(this.getter=e,this.setter=n):(this.getter=()=>e,this.setter=r=>{e=r})}get contents(){return this.getter()}set contents(e){this.setter(e)}}class Ri{}const Yt=/(^|[^%])%([0+\- ]*)(\*|\d+)?(?:\.(\d+))?(\w)/g,Hi=/\{(\d+)(,-?\d+)?(?:\:([a-zA-Z])(\d{0,2})|\:(.+?))?\}/g;function Ur(t,e){return Uo(t,e)<0}function wt(t){return{input:t,cont:Vi(t)}}function Gi(t,e){return typeof e=="string"?t(e):e.cont(t)}function mt(t){return Gi(e=>e,t)}function Li(t,e,n,r,s){let o="";if(e=e||"",s=s||"",vr(t))switch(s.toLowerCase()!=="x"&&(Ur(t,0)?(t=Gn(t,-1),o="-"):e.indexOf(" ")>=0?o=" ":e.indexOf("+")>=0&&(o="+")),r=r==null?null:parseInt(r,10),s){case"f":case"F":r=r!=null?r:6,t=pn(t,r);break;case"g":case"G":t=r!=null?_n(t,r):_n(t);break;case"e":case"E":t=r!=null?wn(t,r):wn(t);break;case"x":t=mn(t);break;case"X":t=mn(t).toUpperCase();break;default:t=String(t);break}else t instanceof Date?t=Vr(t):t=ye(t);if(n=typeof n=="number"?n:parseInt(n,10),isNaN(n))t=o+t;else{const i=e.indexOf("0")>=0,l=e.indexOf("-")>=0,c=l||!i?" ":"0";c==="0"?(t=yt(t,n-o.length,c,l),t=o+t):t=yt(o+t,n,c,l)}return t}function jr(t,e,n,r="",s=-1){return(...o)=>{let i=r;const l=e.slice(),c=n.slice();for(const u of o){const[,,a,h,f,d]=c[0];let p=h;if(s>=0)p=s,s=-1;else if(p==="*"){if(u<0)throw new Error("Non-negative number required");s=u;continue}i+=l[0],i+=Li(u,a,p,f,d),l.splice(0,1),c.splice(0,1)}return c.length===0?(i+=l[0],t(i)):jr(t,l,c,i,s)}}function Vi(t){return e=>{Yt.lastIndex=0;const n=[],r=[];let s=0,o=Yt.exec(t);for(;o;){const i=o.index+(o[1]||"").length;n.push(t.substring(s,i).replace(/%%/g,"%")),r.push(o),s=Yt.lastIndex,Yt.lastIndex-=1,o=Yt.exec(t)}return n.length===0?e(t.replace(/%%/g,"%")):(n.push(t.substring(s).replace(/%%/g,"%")),jr(e,n,r))}}function qr(t,...e){return typeof t=="object"&&e.length>0&&(t=e[0],e.shift()),t.replace(Hi,(n,r,s,o,i,l)=>{let c=e[r];if(vr(c))switch(i=i==null?null:parseInt(i,10),o){case"f":case"F":i=i!=null?i:2,c=pn(c,i);break;case"g":case"G":c=i!=null?_n(c,i):_n(c);break;case"e":case"E":c=i!=null?wn(c,i):wn(c);break;case"p":case"P":i=i!=null?i:2,c=pn(Gn(c,100),i)+" %";break;case"d":case"D":c=i!=null?yt(String(c),i,"0"):String(c);break;case"x":case"X":c=i!=null?yt(mn(c),i,"0"):mn(c),o==="X"&&(c=c.toUpperCase());break;default:if(l){let u="";c=l.replace(/([0#,]+)(\.[0#]+)?/,(a,h,f)=>{Ur(c,0)&&(c=Gn(c,-1),u="-");const d=f!=null?f.length:0;if(c=pn(c,Math.max(d-1,0)),h.indexOf(",")>0){const[w,T]=c.split("."),xe=w.length%3,ut=Math.floor(w.length/3);let at=xe>0?w.substr(0,xe)+(ut>0?",":""):"";for(let Fe=0;Fe<ut;Fe++)at+=w.substr(xe+Fe*3,3)+(Fe<ut-1?",":"");c=T?at+"."+T:at}h=h.replace(/,/g,"");const p=h.length>0&&h[0]==="0"?h.length:0;return yt(c,p-u.length+d,"0")}),c=u+c}}else c instanceof Date?c=Vr(c,l||o):c=ye(c);return s=parseInt((s||" ").substring(1),10),isNaN(s)||(c=yt(String(c),Math.abs(s)," ",s<0)),c})}function An(t,e){return Array.isArray(e)?e.join(t):Array.from(e).join(t)}function yt(t,e,n,r){n=n||" ",e=e-t.length;for(let s=0;s<e;s++)t=r?t+n:n+t;return t}function q(t,...e){return{strs:t,args:e}}var b={GetHashCode(){return Kt([this.s,this.e].concat(this.c))},Equals(t){return!this.cmp(t)},CompareTo(t){return this.cmp(t)},[Le](){const t=this;return{multiply:e=>t.mul(e),toPrecision:e=>t.toPrecision(e),toExponential:e=>t.toExponential(e),toFixed:e=>t.toFixed(e),toHex:()=>(Number(t)>>>0).toString(16)}}},Ui=28,ji=1,tt=1e6,zr=1e6,qi=-29,zi=29,Wi=!1,Jt="[big.js] ",nt=Jt+"Invalid ",In=nt+"decimal places",Zi=nt+"rounding mode",Wr=Jt+"Division by zero",Ae=void 0,Ki=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Zr(){function t(e){var n=this;if(!(n instanceof t))return e===Ae?Zr():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice(),Xi(n);else{if(typeof e!="string"){if(t.strict===!0)throw TypeError(nt+"number");e=e===0&&1/e<0?"-0":String(e)}Yi(n,e)}n.constructor=t}return t.prototype=b,t.DP=Ui,t.RM=ji,t.NE=qi,t.PE=zi,t.strict=Wi,t}function Xi(t){if(t.c.length>1&&!t.c[0]){let e=t.c.findIndex(n=>n);t.c=t.c.slice(e),t.e=t.e-e}}function Yi(t,e){var n,r,s;if(!Ki.test(e))throw Error(nt+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<n&&r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else for(t.e=n-r-1,t.c=[],n=0;r<s;)t.c[n++]=+e.charAt(r++);return t=qe(t,ze.DP+1,ze.RM),t}function qe(t,e,n,r){var s=t.c;if(n===Ae&&(n=ze.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Zi);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Ae))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){const o=s.findIndex((i,l)=>l>=e&&i>0)<0;if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Ae||s[e-1]&1))||n===3&&(r||!o),s.length=e--,r)for(;++s[e]>9;)s[e]=0,e--||(++t.e,s.unshift(1));for(e=s.length;!s[--e];)s.pop()}return t}function Et(t,e,n){var r=t.e,s=t.c.join(""),o=s.length;if(e)s=s.charAt(0)+(o>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>o)for(r-=o;r--;)s+="0";else r<o&&(s=s.slice(0,r)+"."+s.slice(r));else o>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}b.abs=function(){var t=new this.constructor(this);return t.s=1,t},b.cmp=function(t){var e,n=this.constructor,r=new n(this),t=new n(t),s=r.c,o=t.c,i=r.s,l=t.s,c=r.e,u=t.e;if(!s[0]||!o[0])return s[0]?i:o[0]?-l:0;if(i!=l)return i;if(e=i<0,c!=u)return c>u^e?1:-1;for(l=Math.max(s.length,o.length),i=0;i<l;i++)if(c=i<s.length?s[i]:0,u=i<o.length?o[i]:0,c!=u)return c>u^e?1:-1;return 0},b.div=function(t){var e=this.constructor,n=new e(this),t=new e(t),r=n.c,s=t.c,o=n.s==t.s?1:-1,i=e.DP;if(i!==~~i||i<0||i>tt)throw Error(In);if(!s[0])throw Error(Wr);if(!r[0])return t.s=o,t.c=[t.e=0],t;var l,c,u,a,h,f=s.slice(),d=l=s.length,p=r.length,w=r.slice(0,l),T=w.length,xe=t,ut=xe.c=[],at=0,Fe=i+(xe.e=n.e-t.e)+1;for(xe.s=o,o=Fe<0?0:Fe,f.unshift(0);T++<l;)w.push(0);do{for(u=0;u<10;u++){if(l!=(T=w.length))a=l>T?1:-1;else for(h=-1,a=0;++h<l;)if(s[h]!=w[h]){a=s[h]>w[h]?1:-1;break}if(a<0){for(c=T==l?s:f;T;){if(w[--T]<c[T]){for(h=T;h&&!w[--h];)w[h]=9;--w[h],w[T]+=10}w[T]-=c[T]}for(;!w[0];)w.shift()}else break}ut[at++]=a?u:++u,w[0]&&a?w[T]=r[d]||0:w=[r[d]]}while((d++<p||w[0]!==Ae)&&o--);return!ut[0]&&at!=1&&(ut.shift(),xe.e--,Fe--),at>Fe&&qe(xe,Fe,e.RM,w[0]!==Ae),xe},b.eq=function(t){return this.cmp(t)===0},b.gt=function(t){return this.cmp(t)>0},b.gte=function(t){return this.cmp(t)>-1},b.lt=function(t){return this.cmp(t)<0},b.lte=function(t){return this.cmp(t)<1},b.minus=b.sub=function(t){var e,n,r,s,o=this.constructor,i=new o(this),t=new o(t),l=i.s,c=t.s;if(l!=c)return t.s=-c,i.plus(t);var u=i.c.slice(),a=i.e,h=t.c,f=t.e;if(!u[0]||!h[0])return h[0]?t.s=-c:u[0]?t=new o(i):t.s=1,t;if(l=a-f){for((s=l<0)?(l=-l,r=u):(f=a,r=h),r.reverse(),c=l;c--;)r.push(0);r.reverse()}else for(n=((s=u.length<h.length)?u:h).length,l=c=0;c<n;c++)if(u[c]!=h[c]){s=u[c]<h[c];break}if(s&&(r=u,u=h,h=r,t.s=-t.s),(c=(n=h.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;n>l;){if(u[--n]<h[n]){for(e=n;e&&!u[--e];)u[e]=9;--u[e],u[n]+=10}u[n]-=h[n]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t},b.mod=function(t){var e,n=this.constructor,r=new n(this),t=new n(t),s=r.s,o=t.s;if(!t.c[0])throw Error(Wr);return r.s=t.s=1,e=t.cmp(r)==1,r.s=s,t.s=o,e?new n(r):(s=n.DP,o=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=s,n.RM=o,this.minus(r.times(t)))},b.plus=b.add=function(t){var e,n,r,s=this.constructor,o=new s(this),t=new s(t);if(o.s!=t.s)return t.s=-t.s,o.minus(t);var i=o.e,l=o.c,c=t.e,u=t.c;if(!l[0]||!u[0])return u[0]||(l[0]?t=new s(o):t.s=o.s),t;if(l=l.slice(),e=i-c){for(e>0?(c=i,r=u):(e=-e,r=l),r.reverse();e--;)r.push(0);r.reverse()}for(l.length-u.length<0&&(r=u,u=l,l=r),e=u.length,n=0;e;l[e]%=10)n=(l[--e]=l[e]+u[e]+n)/10|0;for(n&&(l.unshift(n),++c),e=l.length;l[--e]===0;)l.pop();return t.c=l,t.e=c,t},b.pow=function(t){var e=this.constructor,n=new e(this),r=new e("1"),s=new e("1"),o=t<0;if(t!==~~t||t<-zr||t>zr)throw Error(nt+"exponent");for(o&&(t=-t);t&1&&(r=r.times(n)),t>>=1,!!t;)n=n.times(n);return o?s.div(r):r},b.prec=function(t,e){if(t!==~~t||t<1||t>tt)throw Error(nt+"precision");return qe(new this.constructor(this),t,e)},b.round=function(t,e){if(t===Ae)t=0;else if(t!==~~t||t<-tt||t>tt)throw Error(In);return qe(new this.constructor(this),t+this.e+1,e)},b.sqrt=function(){var t,e,n,r=this.constructor,s=new r(this),o=s.s,i=s.e,l=new r("0.5");if(!s.c[0])return new r(s);if(o<0)throw Error(Jt+"No square root");o=Math.sqrt(s+""),o===0||o===1/0?(e=s.c.join(""),e.length+i&1||(e+="0"),o=Math.sqrt(e),i=((i+1)/2|0)-(i<0||i&1),t=new r((o==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+i)):t=new r(o+""),i=t.e+(r.DP+=4);do n=t,t=l.times(n.plus(s.div(n)));while(n.c.slice(0,i).join("")!==t.c.slice(0,i).join(""));return qe(t,(r.DP-=4)+t.e+1,r.RM)},b.times=b.mul=function(t){var e,n=this.constructor,r=new n(this),t=new n(t),s=r.c,o=t.c,i=s.length,l=o.length,c=r.e,u=t.e;if(t.s=r.s==t.s?1:-1,!s[0]||!o[0])return t.c=[t.e=0],t;for(t.e=c+u,i<l&&(e=s,s=o,o=e,u=i,i=l,l=u),e=new Array(u=i+l);u--;)e[u]=0;for(c=l;c--;){for(l=0,u=i+c;u>c;)l=e[u]+o[c]*s[u-c-1]+l,e[u--]=l%10,l=l/10|0;e[u]=l}for(l?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},b.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Ae){if(t!==~~t||t<0||t>tt)throw Error(In);for(n=qe(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Et(n,!0,!!r)},b.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Ae){if(t!==~~t||t<0||t>tt)throw Error(In);for(n=qe(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Et(n,!1,!!r)},b.toJSON=b.toString=function(){var t=this,e=t.constructor;return Et(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},b.toNumber=function(){var t=Number(Et(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Jt+"Imprecise conversion");return t},b.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Ae){if(t!==~~t||t<1||t>tt)throw Error(nt+"precision");for(n=qe(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Et(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)},b.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Jt+"valueOf disallowed");return Et(t,t.e<=e.NE||t.e>=e.PE,!0)};var ze=Zr();new ze(0),new ze(1),new ze(-1),new ze("79228162514264337593543950335"),new ze("-79228162514264337593543950335");const Kr="Collection was empty.";class St{constructor(e){this.value=e}toJSON(){return this.value}toString(){return String(this.value)}GetHashCode(){return me(this.value)}Equals(e){return e==null?!1:J(this.value,e instanceof St?e.value:e)}CompareTo(e){return e==null?1:le(this.value,e instanceof St?e.value:e)}}function R(t){return t==null||t instanceof St?new St(t):t}function k(t){if(t==null)throw new Error("Option has no value");return t instanceof St?t.value:t}function We(t){return t==null?[]:[k(t)]}function Ji(t,e){return t!=null?k(t):e}function Qi(t,e){return e!=null?R(t(k(e))):void 0}function Xr(t,e){return typeof t=="function"?new t(e):new Array(e)}function zn(t,e,n,r){const s=e|0;return t.fill(r,s,s+n)}function ec(t,e){const n=Xr(e,1);return n[0]=t,n}function bt(t,e,n){if(t<0)throw new Error("The input must be non-negative\\nParameter name: count");const r=Xr(n,t);for(let s=0;s<=t-1;s++)r[s]=e(s);return r}function tc(t){return t.slice()}function nc(t,e,n){return n.reduce((r,s)=>t(r,s),e)}function rc(t,e,n){if(e==null)return n==null;if(n==null)return!1;{let r=0,s=!0;const o=e.length|0,i=n.length|0;if(o>i)return!1;if(o<i)return!1;for(;r<o&&s;)s=t(e[r],n[r]),r=r+1|0;return s}}function sc(t,e,n){return e.reduceRight((r,s)=>t(s,r),n)}function oc(t){return{Compare(e,n){return t(e,n)}}}function ic(){return oc((t,e)=>le(t,e))}function Yr(){return ic()}function cc(t){throw new Error(t)}const lc="Enumeration already finished.",uc="Enumeration has not started. Call MoveNext.",Jr="The input sequence has an insufficient number of elements.",ac="Reset is not supported on this enumerator.";function fc(){throw new Error(ac)}function Wn(){throw new Error(uc)}function Zn(){throw new Error(lc)}class hc{constructor(e){this.f=e}toString(){const e=this,n=4;let r=0,s="seq [";const o=x(e);try{for(;r<n&&o["System.Collections.IEnumerator.MoveNext"]();)r>0&&(s=s+"; "),s=s+ye(o["System.Collections.Generic.IEnumerator`1.get_Current"]()),r=r+1|0;return r===n&&(s=s+"; ..."),s+"]"}finally{o.Dispose()}}GetEnumerator(){return this.f()}[Symbol.iterator](){return Wt(this.GetEnumerator())}["System.Collections.IEnumerable.GetEnumerator"](){return this.f()}}function dc(t){return new hc(t)}class gc{constructor(e,n,r){this.current=e,this.next=n,this.dispose=r}["System.Collections.Generic.IEnumerator`1.get_Current"](){return this.current()}["System.Collections.IEnumerator.get_Current"](){return this.current()}["System.Collections.IEnumerator.MoveNext"](){return this.next()}["System.Collections.IEnumerator.Reset"](){fc()}Dispose(){this.dispose()}}function Pn(t,e,n){return new gc(t,e,n)}function pc(t){let e,n,r=!1,s=!1,o;const i=()=>{if(s=!0,n!=null){const l=n;try{l.Dispose()}finally{n=void 0}}if(e!=null){const l=e;try{l.Dispose()}finally{e=void 0}}};return Pn(()=>(r?s&&Zn():Wn(),o!=null?k(o):Zn()),()=>{let l;if(r||(r=!0),s)return!1;{let c;for(;c==null;){const u=[e,n];if(u[0]!=null)if(u[1]!=null){const a=u[1];if(a["System.Collections.IEnumerator.MoveNext"]())o=R(a["System.Collections.Generic.IEnumerator`1.get_Current"]()),c=!0;else try{a.Dispose()}finally{n=void 0}}else{const a=u[0];a["System.Collections.IEnumerator.MoveNext"]()?n=(l=a["System.Collections.Generic.IEnumerator`1.get_Current"](),x(l)):(i(),c=!1)}else e=x(t)}return k(c)}},()=>{s||i()})}function _c(t,e){return Pn(()=>e["System.Collections.Generic.IEnumerator`1.get_Current"](),()=>e["System.Collections.IEnumerator.MoveNext"](),()=>{try{e.Dispose()}finally{t()}})}function Qr(t,e,n){let r=!1,s,o=R(t());const i=()=>{if(o!=null){const c=k(o);try{n(c)}finally{o=void 0}}},l=()=>{try{i()}finally{s=void 0}};return Pn(()=>(r||Wn(),s!=null?k(s):Zn()),()=>{if(r||(r=!0),o!=null){const c=k(o);let u;try{u=e(c)}catch(a){throw l(),a}return u!=null?(s=u,!0):(l(),!1)}else return!1},i)}function wc(t,e){let n,r=e;return Pn(()=>{if(n!=null){const s=n[0];return n[1],s}else return Wn()},()=>(n=t(r),n!=null?(n[0],r=n[1],!0):!1),()=>{})}function mc(t,e){e==null&&cc(t)}function Ct(t){return dc(t)}function Oe(t){return mc("source",t),x(t)}function ae(t){return Ct(()=>x(t()))}function Kn(t){return Ct(()=>pc(t))}function yc(t,e){return Ct(()=>wc(t,e))}function es(t){return ae(()=>ec(t))}function Ec(t){return t}function Xn(t){return t instanceof Se?en(t):Array.from(t)}function Sc(t){return t}function bc(t){return we(t)?H(t):t instanceof Se?t:er(t)}function ts(t,e,n){return Ct(()=>Qr(t,e,n))}function Cc(t,e,n){return Ct(()=>{let r=-1;return Qr(t,s=>(r=r+1|0,e(r,s)),n)})}function ns(t,e){return Kn([t,e])}function vc(t,e,n){const r=Oe(e);try{const s=Oe(n);try{let o=0,i=r["System.Collections.IEnumerator.MoveNext"](),l=s["System.Collections.IEnumerator.MoveNext"]();for(;o===0&&i&&l;)o=t(r["System.Collections.Generic.IEnumerator`1.get_Current"](),s["System.Collections.Generic.IEnumerator`1.get_Current"]())|0,o===0&&(i=r["System.Collections.IEnumerator.MoveNext"](),l=s["System.Collections.IEnumerator.MoveNext"]());return(o!==0?o:i?1:l?-1:0)|0}finally{s.Dispose()}}finally{r.Dispose()}}function rs(t,e,n){const r=Oe(e);try{let s=!1;for(;!s&&r["System.Collections.IEnumerator.MoveNext"]();)s=n.Equals(t,r["System.Collections.Generic.IEnumerator`1.get_Current"]());return s}finally{r.Dispose()}}function Re(t,e,n){const r=Oe(n);try{let s=e;for(;r["System.Collections.IEnumerator.MoveNext"]();)s=t(s,r["System.Collections.Generic.IEnumerator`1.get_Current"]());return s}finally{r.Dispose()}}function z(t,e){Re((n,r)=>{t(r)},void 0,e)}function $c(t,e){Re((n,r)=>(t(n,r),n+1|0),0,e)}function $(t,e){return ts(()=>Oe(e),n=>n["System.Collections.IEnumerator.MoveNext"]()?R(t(n["System.Collections.Generic.IEnumerator`1.get_Current"]())):void 0,n=>{n.Dispose()})}function Mc(t,e,n){return ts(()=>[Oe(e),Oe(n)],r=>{const s=r[0],o=r[1];return s["System.Collections.IEnumerator.MoveNext"]()&&o["System.Collections.IEnumerator.MoveNext"]()?R(t(s["System.Collections.Generic.IEnumerator`1.get_Current"](),o["System.Collections.Generic.IEnumerator`1.get_Current"]())):void 0},r=>{try{r[0].Dispose()}finally{r[1].Dispose()}})}function Ac(t,e){return Ct(()=>{const n=Oe(e);try{for(let r=1;r<=t;r++)if(!n["System.Collections.IEnumerator.MoveNext"]())throw new Error(Jr+"\\nParameter name: source");return _c(()=>{},n)}catch(r){throw n.Dispose(),r}})}function Ic(t,e){return Cc(()=>Oe(e),(n,r)=>{if(n<t){if(r["System.Collections.IEnumerator.MoveNext"]())return R(r["System.Collections.Generic.IEnumerator`1.get_Current"]());throw new Error(Jr+"\\nParameter name: source")}else return},n=>{n.Dispose()})}function Pc(t,e){return Mc((n,r)=>[n,r],t,e)}function Yn(t,e){return ae(()=>Kn($(t,e)))}function ss(t,e){return ae(()=>{const n=Xn(e);return n.sort(t),Ec(n)})}function Tc(t,e,n){return ss((r,s)=>n.Compare(t(r),t(s)),e)}function Nc(t,e,n){return ss((r,s)=>n.Compare(t(r),t(s))*-1,e)}class Se extends ue{constructor(e,n){super();this.head=e,this.tail=n}toString(){return"["+An("; ",this)+"]"}Equals(e){const n=this;return n===e?!0:((s,o)=>{e:for(;;){const i=s,l=o,c=[i.tail,l.tail];if(c[0]!=null)if(c[1]!=null){const u=c[0],a=c[1];if(J(i.head,l.head)){s=u,o=a;continue e}else return!1}else return!1;else return c[1]==null}})(n,e)}GetHashCode(){return((r,s,o)=>{e:for(;;){const i=r,l=s,c=o,u=c.tail;if(u!=null){const a=u;if(i>18)return l|0;r=i+1,s=(l<<1)+me(c.head)+631*i,o=a;continue e}else return l|0}})(0,0,this)|0}toJSON(e){const n=this;return Array.from(n)}CompareTo(e){return((s,o)=>{e:for(;;){const i=s,l=o,c=[i.tail,l.tail];if(c[0]!=null)if(c[1]!=null){const u=c[0],a=c[1],h=le(i.head,l.head)|0;if(h===0){s=u,o=a;continue e}else return h|0}else return 1;else return c[1]!=null?-1:0}})(this,e)|0}GetEnumerator(){return Fc(this)}[Symbol.iterator](){return Wt(this.GetEnumerator())}["System.Collections.IEnumerable.GetEnumerator"](){return x(this)}}class xc{constructor(e){this.xs=e,this.it=this.xs,this.current=null}["System.Collections.Generic.IEnumerator`1.get_Current"](){return this.current}["System.Collections.IEnumerator.get_Current"](){return this.current}["System.Collections.IEnumerator.MoveNext"](){const e=this,n=e.it.tail;if(n!=null){const r=n;return e.current=e.it.head,e.it=r,!0}else return!1}["System.Collections.IEnumerator.Reset"](){const e=this;e.it=e.xs,e.current=null}Dispose(){}}function Fc(t){return new xc(t)}function Ie(){return new Se(null,void 0)}function Qt(t,e){return new Se(t,e)}function Jn(t){return t.tail==null}function os(t){return((n,r)=>{e:for(;;){const s=n,i=r.tail;if(i!=null){n=s+1,r=i;continue e}else return s|0}})(0,t)|0}function Qn(t){if(t.tail!=null)return t.head;throw new Error(Kr+"\\nParameter name: list")}function vt(t){const e=t.tail;if(e!=null)return e;throw new Error(Kr+"\\nParameter name: list")}function F(){return Ie()}function W(t,e){return Qt(t,e)}function Ze(t){return Qt(t,Ie())}function m(t){return Jn(t)}function kc(t){return os(t)}function g(t){return Qn(t)}function y(t){return vt(t)}function en(t){const e=os(t)|0,n=zn(new Array(e),0,e,null);return((s,o)=>{e:for(;;){const i=s,l=o;if(!Jn(l)){n[i]=Qn(l),s=i+1,o=vt(l);continue e}break}})(0,t),n}function rt(t,e,n){let r=e,s=n;for(;!Jn(s);)r=t(r,Qn(s)),s=vt(s);return r}function Bc(t){return rt((e,n)=>Qt(n,e),Ie(),t)}function Dc(t,e,n){return sc(t,en(e),n)}function is(t,e){rt((n,r)=>{t(r)},void 0,e)}function I(t,e){let n=e;for(let r=t.length-1;r>=0;r--)n=Qt(t[r],n);return n}function H(t){return I(t,Ie())}function er(t){let e,n;if(we(t))return H(t);if(t instanceof Se)return t;{const r=Ie();let s=r;const o=x(t);try{for(;o["System.Collections.IEnumerator.MoveNext"]();){const c=o["System.Collections.Generic.IEnumerator`1.get_Current"]();s=(e=s,n=new Se(c,void 0),e.tail=n,n)}}finally{o.Dispose()}const i=s,l=Ie();return i.tail=l,vt(r)}}function Oc(t){const e=Ie();let n=e;const r=i=>{n=rt((l,c)=>{const u=new Se(c,void 0);return l.tail=u,u},n,i)};if(we(t))t.forEach(r);else if(t instanceof Se)is(r,t);else{const i=x(t);try{for(;i["System.Collections.IEnumerator.MoveNext"]();)r(i["System.Collections.Generic.IEnumerator`1.get_Current"]())}finally{i.Dispose()}}const s=n,o=Ie();return s.tail=o,vt(e)}function Rc(t,e){return rt((n,r)=>Qt(r,n),e,Bc(t))}function cs(t,e){let n,r;const s=Ie();let o=s;for(let c=0;c<=t-1;c++)o=(n=o,r=new Se(e(c),void 0),n.tail=r,r);const i=o,l=Ie();return i.tail=l,vt(s)}function Hc(t,e){const n=en(e);return n.sort(t),H(n)}function Gc(t,e){return Hc((n,r)=>e.Compare(n,r)*-1,t)}function Lc(t,e){console.error(t,e)}function ls(t,e,n){is(r=>{try{r(e)}catch(s){t(s)}},n)}function us(){return F()}function Vc(t){return Oc(t)}function Uc(t){return Ze(e=>{e(t)})}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tr=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,nr=Symbol(),as=new Map;class fs{constructor(e,n){if(this._$cssResult$=!0,n!==nr)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){let e=as.get(this.cssText);return tr&&e===void 0&&(as.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const jc=t=>new fs(typeof t=="string"?t:t+"",nr),qc=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,o)=>r+(i=>{if(i._$cssResult$===!0)return i.cssText;if(typeof i=="number")return i;throw Error("Value passed to 'css' function must be a 'css' function result: "+i+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[o+1],t[0]);return new fs(n,nr)},zc=(t,e)=>{tr?t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{const r=document.createElement("style"),s=window.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)})},hs=tr?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return jc(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var rr;const ds=window.trustedTypes,Wc=ds?ds.emptyScript:"",gs=window.reactiveElementPolyfillSupport,sr={toAttribute(t,e){switch(e){case Boolean:t=t?Wc:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},ps=(t,e)=>e!==t&&(e==e||t==t),or={attribute:!0,type:String,converter:sr,reflect:!1,hasChanged:ps};class $t extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(e){var n;(n=this.l)!==null&&n!==void 0||(this.l=[]),this.l.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((n,r)=>{const s=this._$Eh(r,n);s!==void 0&&(this._$Eu.set(s,r),e.push(s))}),e}static createProperty(e,n=or){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),!n.noAccessor&&!this.prototype.hasOwnProperty(e)){const r=typeof e=="symbol"?Symbol():"__"+e,s=this.getPropertyDescriptor(e,r,n);s!==void 0&&Object.defineProperty(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){return{get(){return this[n]},set(s){const o=this[e];this[n]=s,this.requestUpdate(e,o,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||or}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const n=this.properties,r=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const s of r)this.createProperty(s,n[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(hs(s))}else e!==void 0&&n.push(hs(e));return n}static _$Eh(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}o(){var e;this._$Ep=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Em(),this.requestUpdate(),(e=this.constructor.l)===null||e===void 0||e.forEach(n=>n(this))}addController(e){var n,r;((n=this._$Eg)!==null&&n!==void 0?n:this._$Eg=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)===null||r===void 0||r.call(e))}removeController(e){var n;(n=this._$Eg)===null||n===void 0||n.splice(this._$Eg.indexOf(e)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((e,n)=>{this.hasOwnProperty(n)&&(this._$Et.set(n,this[n]),delete this[n])})}createRenderRoot(){var e;const n=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return zc(n,this.constructor.elementStyles),n}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$Eg)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostConnected)===null||r===void 0?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$Eg)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostDisconnected)===null||r===void 0?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ES(e,n,r=or){var s,o;const i=this.constructor._$Eh(e,r);if(i!==void 0&&r.reflect===!0){const l=((o=(s=r.converter)===null||s===void 0?void 0:s.toAttribute)!==null&&o!==void 0?o:sr.toAttribute)(n,r.type);this._$Ei=e,l==null?this.removeAttribute(i):this.setAttribute(i,l),this._$Ei=null}}_$AK(e,n){var r,s,o;const i=this.constructor,l=i._$Eu.get(e);if(l!==void 0&&this._$Ei!==l){const c=i.getPropertyOptions(l),u=c.converter,a=(o=(s=(r=u)===null||r===void 0?void 0:r.fromAttribute)!==null&&s!==void 0?s:typeof u=="function"?u:null)!==null&&o!==void 0?o:sr.fromAttribute;this._$Ei=l,this[l]=a(n,c.type),this._$Ei=null}}requestUpdate(e,n,r){let s=!0;e!==void 0&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||ps)(this[e],n)?(this._$AL.has(e)||this._$AL.set(e,n),r.reflect===!0&&this._$Ei!==e&&(this._$E_===void 0&&(this._$E_=new Map),this._$E_.set(e,r))):s=!1),!this.isUpdatePending&&s&&(this._$Ep=this._$EC())}async _$EC(){this.isUpdatePending=!0;try{await this._$Ep}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach((s,o)=>this[o]=s),this._$Et=void 0);let n=!1;const r=this._$AL;try{n=this.shouldUpdate(r),n?(this.willUpdate(r),(e=this._$Eg)===null||e===void 0||e.forEach(s=>{var o;return(o=s.hostUpdate)===null||o===void 0?void 0:o.call(s)}),this.update(r)):this._$EU()}catch(s){throw n=!1,this._$EU(),s}n&&this._$AE(r)}willUpdate(e){}_$AE(e){var n;(n=this._$Eg)===null||n===void 0||n.forEach(r=>{var s;return(s=r.hostUpdated)===null||s===void 0?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(e){return!0}update(e){this._$E_!==void 0&&(this._$E_.forEach((n,r)=>this._$ES(r,this[r],n)),this._$E_=void 0),this._$EU()}updated(e){}firstUpdated(e){}}$t.finalized=!0,$t.elementProperties=new Map,$t.elementStyles=[],$t.shadowRootOptions={mode:"open"},gs==null||gs({ReactiveElement:$t}),((rr=globalThis.reactiveElementVersions)!==null&&rr!==void 0?rr:globalThis.reactiveElementVersions=[]).push("1.0.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ir;const Mt=globalThis.trustedTypes,_s=Mt?Mt.createPolicy("lit-html",{createHTML:t=>t}):void 0,Ke=`lit$${(Math.random()+"").slice(9)}$`,ws="?"+Ke,Zc=`<${ws}>`,At=document,tn=(t="")=>At.createComment(t),nn=t=>t===null||typeof t!="object"&&typeof t!="function",ms=Array.isArray,Kc=t=>{var e;return ms(t)||typeof((e=t)===null||e===void 0?void 0:e[Symbol.iterator])=="function"},rn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ys=/-->/g,Es=/>/g,st=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Ss=/'/g,bs=/"/g,Cs=/^(?:script|style|textarea)$/i,Xc=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),Yc=Xc(1),It=Symbol.for("lit-noChange"),D=Symbol.for("lit-nothing"),vs=new WeakMap,Jc=(t,e,n)=>{var r,s;const o=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:e;let i=o._$litPart$;if(i===void 0){const l=(s=n==null?void 0:n.renderBefore)!==null&&s!==void 0?s:null;o._$litPart$=i=new on(e.insertBefore(tn(),l),l,void 0,n!=null?n:{})}return i._$AI(t),i},Pt=At.createTreeWalker(At,129,null,!1),Qc=(t,e)=>{const n=t.length-1,r=[];let s,o=e===2?"<svg>":"",i=rn;for(let c=0;c<n;c++){const u=t[c];let a,h,f=-1,d=0;for(;d<u.length&&(i.lastIndex=d,h=i.exec(u),h!==null);)d=i.lastIndex,i===rn?h[1]==="!--"?i=ys:h[1]!==void 0?i=Es:h[2]!==void 0?(Cs.test(h[2])&&(s=RegExp("</"+h[2],"g")),i=st):h[3]!==void 0&&(i=st):i===st?h[0]===">"?(i=s!=null?s:rn,f=-1):h[1]===void 0?f=-2:(f=i.lastIndex-h[2].length,a=h[1],i=h[3]===void 0?st:h[3]==='"'?bs:Ss):i===bs||i===Ss?i=st:i===ys||i===Es?i=rn:(i=st,s=void 0);const p=i===st&&t[c+1].startsWith("/>")?" ":"";o+=i===rn?u+Zc:f>=0?(r.push(a),u.slice(0,f)+"$lit$"+u.slice(f)+Ke+p):u+Ke+(f===-2?(r.push(void 0),c):p)}const l=o+(t[n]||"<?>")+(e===2?"</svg>":"");return[_s!==void 0?_s.createHTML(l):l,r]};class sn{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let o=0,i=0;const l=e.length-1,c=this.parts,[u,a]=Qc(e,n);if(this.el=sn.createElement(u,r),Pt.currentNode=this.el.content,n===2){const h=this.el.content,f=h.firstChild;f.remove(),h.append(...f.childNodes)}for(;(s=Pt.nextNode())!==null&&c.length<l;){if(s.nodeType===1){if(s.hasAttributes()){const h=[];for(const f of s.getAttributeNames())if(f.endsWith("$lit$")||f.startsWith(Ke)){const d=a[i++];if(h.push(f),d!==void 0){const p=s.getAttribute(d.toLowerCase()+"$lit$").split(Ke),w=/([.?@])?(.*)/.exec(d);c.push({type:1,index:o,name:w[2],strings:p,ctor:w[1]==="."?tl:w[1]==="?"?rl:w[1]==="@"?sl:Tn})}else c.push({type:6,index:o})}for(const f of h)s.removeAttribute(f)}if(Cs.test(s.tagName)){const h=s.textContent.split(Ke),f=h.length-1;if(f>0){s.textContent=Mt?Mt.emptyScript:"";for(let d=0;d<f;d++)s.append(h[d],tn()),Pt.nextNode(),c.push({type:2,index:++o});s.append(h[f],tn())}}}else if(s.nodeType===8)if(s.data===ws)c.push({type:2,index:o});else{let h=-1;for(;(h=s.data.indexOf(Ke,h+1))!==-1;)c.push({type:7,index:o}),h+=Ke.length-1}o++}}static createElement(e,n){const r=At.createElement("template");return r.innerHTML=e,r}}function Tt(t,e,n=t,r){var s,o,i,l;if(e===It)return e;let c=r!==void 0?(s=n._$Cl)===null||s===void 0?void 0:s[r]:n._$Cu;const u=nn(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==u&&((o=c==null?void 0:c._$AO)===null||o===void 0||o.call(c,!1),u===void 0?c=void 0:(c=new u(t),c._$AT(t,n,r)),r!==void 0?((i=(l=n)._$Cl)!==null&&i!==void 0?i:l._$Cl=[])[r]=c:n._$Cu=c),c!==void 0&&(e=Tt(t,c._$AS(t,e.values),c,r)),e}class el{constructor(e,n){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var n;const{el:{content:r},parts:s}=this._$AD,o=((n=e==null?void 0:e.creationScope)!==null&&n!==void 0?n:At).importNode(r,!0);Pt.currentNode=o;let i=Pt.nextNode(),l=0,c=0,u=s[0];for(;u!==void 0;){if(l===u.index){let a;u.type===2?a=new on(i,i.nextSibling,this,e):u.type===1?a=new u.ctor(i,u.name,u.strings,this,e):u.type===6&&(a=new ol(i,this,e)),this.v.push(a),u=s[++c]}l!==(u==null?void 0:u.index)&&(i=Pt.nextNode(),l++)}return o}m(e){let n=0;for(const r of this.v)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class on{constructor(e,n,r,s){var o;this.type=2,this._$AH=D,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cg=(o=s==null?void 0:s.isConnected)===null||o===void 0||o}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$Cg}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Tt(this,e,n),nn(e)?e===D||e==null||e===""?(this._$AH!==D&&this._$AR(),this._$AH=D):e!==this._$AH&&e!==It&&this.$(e):e._$litType$!==void 0?this.T(e):e.nodeType!==void 0?this.S(e):Kc(e)?this.M(e):this.$(e)}A(e,n=this._$AB){return this._$AA.parentNode.insertBefore(e,n)}S(e){this._$AH!==e&&(this._$AR(),this._$AH=this.A(e))}$(e){this._$AH!==D&&nn(this._$AH)?this._$AA.nextSibling.data=e:this.S(At.createTextNode(e)),this._$AH=e}T(e){var n;const{values:r,_$litType$:s}=e,o=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=sn.createElement(s.h,this.options)),s);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===o)this._$AH.m(r);else{const i=new el(o,this),l=i.p(this.options);i.m(r),this.S(l),this._$AH=i}}_$AC(e){let n=vs.get(e.strings);return n===void 0&&vs.set(e.strings,n=new sn(e)),n}M(e){ms(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const o of e)s===n.length?n.push(r=new on(this.A(tn()),this.A(tn()),this,this.options)):r=n[s],r._$AI(o),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cg=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}}class Tn{constructor(e,n,r,s,o){this.type=1,this._$AH=D,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=o,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=D}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,r,s){const o=this.strings;let i=!1;if(o===void 0)e=Tt(this,e,n,0),i=!nn(e)||e!==this._$AH&&e!==It,i&&(this._$AH=e);else{const l=e;let c,u;for(e=o[0],c=0;c<o.length-1;c++)u=Tt(this,l[r+c],n,c),u===It&&(u=this._$AH[c]),i||(i=!nn(u)||u!==this._$AH[c]),u===D?e=D:e!==D&&(e+=(u!=null?u:"")+o[c+1]),this._$AH[c]=u}i&&!s&&this.k(e)}k(e){e===D?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class tl extends Tn{constructor(){super(...arguments),this.type=3}k(e){this.element[this.name]=e===D?void 0:e}}const nl=Mt?Mt.emptyScript:"";class rl extends Tn{constructor(){super(...arguments),this.type=4}k(e){e&&e!==D?this.element.setAttribute(this.name,nl):this.element.removeAttribute(this.name)}}class sl extends Tn{constructor(e,n,r,s,o){super(e,n,r,s,o),this.type=5}_$AI(e,n=this){var r;if((e=(r=Tt(this,e,n,0))!==null&&r!==void 0?r:D)===It)return;const s=this._$AH,o=e===D&&s!==D||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,i=e!==D&&(s===D||o);o&&this.element.removeEventListener(this.name,this,s),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,r;typeof this._$AH=="function"?this._$AH.call((r=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&r!==void 0?r:this.element,e):this._$AH.handleEvent(e)}}class ol{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Tt(this,e)}}const $s=window.litHtmlPolyfillSupport;$s==null||$s(sn,on),((ir=globalThis.litHtmlVersions)!==null&&ir!==void 0?ir:globalThis.litHtmlVersions=[]).push("2.0.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var cr,lr;class cn extends $t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,n;const r=super.createRenderRoot();return(e=(n=this.renderOptions).renderBefore)!==null&&e!==void 0||(n.renderBefore=r.firstChild),r}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=Jc(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!1)}render(){return It}}cn.finalized=!0,cn._$litElement$=!0,(cr=globalThis.litElementHydrateSupport)===null||cr===void 0||cr.call(globalThis,{LitElement:cn});const Ms=globalThis.litElementPolyfillSupport;Ms==null||Ms({LitElement:cn}),((lr=globalThis.litElementVersions)!==null&&lr!==void 0?lr:globalThis.litElementVersions=[]).push("3.0.2");function As(t,e){return t(e.strs,...e.args)}const Q=(()=>{const t=Yc;return e=>As(t,e)})(),il=(()=>{const t=qc;return e=>As(t,e)})();function Is(t,e,n){return t.has(e)?(n.contents=t.get(e),!0):!1}function cl(t,e,n){if(t.has(e))throw new Error("An item with the same key has already been added. Key: "+e);t.set(e,n)}function Nt(t,e){if(t.has(e))return t.get(e);throw new Error(`The given key '${e}' was not present in the dictionary.`)}class ll{constructor(e,n){const r=new Mn(null);this.comparer=n,r.contents=this,this.hashMap=new Map([]),this["init@8-1"]=1;const s=x(e);try{for(;s["System.Collections.IEnumerator.MoveNext"]();){const o=s["System.Collections.Generic.IEnumerator`1.get_Current"]();ur(r.contents,o[0],o[1])}}finally{s.Dispose()}}get[Symbol.toStringTag](){return"Dictionary"}toJSON(e){const n=this;return Array.from(n)}["System.Collections.IEnumerable.GetEnumerator"](){return x(this)}GetEnumerator(){return x(Kn(this.hashMap.values()))}[Symbol.iterator](){return Wt(this.GetEnumerator())}["System.Collections.Generic.ICollection`1.Add2B595"](e){ur(this,e[0],e[1])}["System.Collections.Generic.ICollection`1.Clear"](){Ps(this)}["System.Collections.Generic.ICollection`1.Contains2B595"](e){const r=Nn(this,e[0]);let s;switch(r!=null&&J(r[1],e[1])?s=0:s=1,s){case 0:return!0;case 1:return!1}}["System.Collections.Generic.ICollection`1.CopyToZ2E171D71"](e,n){$c((s,o)=>{e[n+s]=o},this)}["System.Collections.Generic.ICollection`1.get_Count"](){return Ts(this)|0}["System.Collections.Generic.ICollection`1.get_IsReadOnly"](){return!1}["System.Collections.Generic.ICollection`1.Remove2B595"](e){const n=this,r=Nn(n,e[0]);return r!=null?(J(r[1],e[1])&&ar(n,e[0]),!0):!1}["System.Collections.Generic.IDictionary`2.Add5BDDA1"](e,n){ur(this,e,n)}["System.Collections.Generic.IDictionary`2.ContainsKey2B595"](e){return Fs(this,e)}["System.Collections.Generic.IDictionary`2.get_Item2B595"](e){return Ns(this,e)}["System.Collections.Generic.IDictionary`2.set_Item5BDDA1"](e,n){xs(this,e,n)}["System.Collections.Generic.IDictionary`2.get_Keys"](){const e=this;return Xn(ae(()=>$(n=>n[0],e)))}["System.Collections.Generic.IDictionary`2.Remove2B595"](e){return ar(this,e)}["System.Collections.Generic.IDictionary`2.TryGetValue23A0B95A"](e,n){const s=Nn(this,e);if(s!=null){const o=s;return n.contents=o[1],!0}else return!1}["System.Collections.Generic.IDictionary`2.get_Values"](){const e=this;return Xn(ae(()=>$(n=>n[1],e)))}get size(){return Ts(this)|0}clear(){Ps(this)}delete(e){return ar(this,e)}entries(){return $(n=>[n[0],n[1]],this)}get(e){return Ns(this,e)}has(e){return Fs(this,e)}keys(){return $(n=>n[0],this)}set(e,n){const r=this;return xs(r,e,n),r}values(){return $(n=>n[1],this)}forEach(e,n){const r=this;z(s=>{e(s[1],s[0],r)},r)}}function ln(t,e){const n=t.comparer.GetHashCode(e)|0;let r,s=null;return r=[Is(t.hashMap,n,new Mn(()=>s,o=>{s=o})),s],r[0]?[!0,n,r[1].findIndex(o=>t.comparer.Equals(e,o[0]))]:[!1,n,-1]}function Nn(t,e){const n=ln(t,e);let r;switch(n[0]&&n[2]>-1?r=0:r=1,r){case 0:return Nt(t.hashMap,n[1])[n[2]];case 1:return}}function Ps(t){t.hashMap.clear()}function Ts(t){let e=0,n=x(t.hashMap.values());try{for(;n["System.Collections.IEnumerator.MoveNext"]();){const r=n["System.Collections.Generic.IEnumerator`1.get_Current"]();e=e+r.length|0}}finally{n.Dispose()}return e|0}function Ns(t,e){const n=Nn(t,e);if(n!=null)return n[1];throw new Error("The item was not found in collection")}function xs(t,e,n){const r=ln(t,e);let s;switch(r[0]&&r[2]>-1?s=0:s=1,s){case 0:{Nt(t.hashMap,r[1])[r[2]]=[e,n];break}case 1:{r[0]?Nt(t.hashMap,r[1]).push([e,n]):t.hashMap.set(r[1],[[e,n]]);break}}}function ur(t,e,n){const r=ln(t,e);let s;switch(r[0]&&r[2]>-1?s=0:s=1,s){case 0:{const o=qr("An item with the same key has already been added. Key: {0}",e);throw new Error(o)}case 1:{r[0]?Nt(t.hashMap,r[1]).push([e,n]):t.hashMap.set(r[1],[[e,n]]);break}}}function Fs(t,e){const n=ln(t,e);let r;switch(n[0]&&n[2]>-1?r=0:r=1,r){case 0:return!0;case 1:return!1}}function ar(t,e){const n=ln(t,e);let r;switch(n[0]&&n[2]>-1?r=0:r=1,r){case 0:return Nt(t.hashMap,n[1]).splice(n[2],1),!0;case 1:return!1}}function ks(t,e,n){return ae(()=>{const r=new ll([],n),s=[],o=x(e);try{for(;o["System.Collections.IEnumerator.MoveNext"]();){const i=o["System.Collections.Generic.IEnumerator`1.get_Current"](),l=t(i);let c,u=null;c=[Is(r,l,new Mn(()=>u,a=>{u=a})),u],c[0]?c[1].push(i):(cl(r,l,[i]),s.push(l))}}finally{o.Dispose()}return $(i=>[i,Nt(r,i)],s)})}class Bs{constructor(e,n){this.k=e,this.v=n}}function xn(t,e){return new Bs(t,e)}function G(t){return t.k}function ee(t){return t.v}class B extends Bs{constructor(e,n,r,s,o){super(e,n);this.left=r,this.right=s,this.h=o|0}}function Fn(t,e,n,r,s){return new B(t,e,n,r,s)}function L(t){return t.left}function V(t){return t.right}function ot(t){return t.h}function xt(){}function Ds(t,e){e:for(;;){const n=t,r=e;if(r!=null){const s=r;if(s instanceof B){t=Ds(n+1,L(s)),e=V(s);continue e}else return n+1|0}else return n|0}}function ul(t){return Ds(0,t)}function be(t,e,n,r){let s;const o=t;if(o!=null){const u=o;s=u instanceof B?ot(u):1}else s=0;let i;const l=r;if(l!=null){const u=l;i=u instanceof B?ot(u):1}else i=0;const c=(s<i?i:s)|0;return c===0?xn(e,n):Fn(e,n,t,r,c+1)}function Os(t,e,n,r){let s,o,i,l,c;const u=t;if(u!=null){const f=u;c=f instanceof B?ot(f):1}else c=0;let a;const h=r;if(h!=null){const f=h;a=f instanceof B?ot(f):1}else a=0;if(a>c+2){const f=k(r);if(f instanceof B)if(s=L(f),(s!=null?(o=s,o instanceof B?ot(o):1):0)>c+1){const d=k(L(f));if(d instanceof B)return be(be(t,e,n,L(d)),G(d),ee(d),be(V(d),G(f),ee(f),V(f)));throw new Error("internal error: Map.rebalance")}else return be(be(t,e,n,L(f)),G(f),ee(f),V(f));else throw new Error("internal error: Map.rebalance")}else if(c>a+2){const f=k(t);if(f instanceof B)if(i=V(f),(i!=null?(l=i,l instanceof B?ot(l):1):0)>a+1){const d=k(V(f));if(d instanceof B)return be(be(L(f),G(f),ee(f),L(d)),G(d),ee(d),be(V(d),e,n,r));throw new Error("internal error: Map.rebalance")}else return be(L(f),G(f),ee(f),be(V(f),e,n,r));else throw new Error("internal error: Map.rebalance")}else return be(t,e,n,r)}function Ft(t,e,n,r){if(r!=null){const s=r,o=t.Compare(e,G(s))|0;return s instanceof B?o<0?Os(Ft(t,e,n,L(s)),G(s),ee(s),V(s)):o===0?Fn(e,n,L(s),V(s),ot(s)):Os(L(s),G(s),ee(s),Ft(t,e,n,V(s))):o<0?Fn(e,n,xt(),r,2):o===0?xn(e,n):Fn(e,n,r,xt(),2)}else return xn(e,n)}function Rs(t,e,n){e:for(;;){const r=t,s=e,o=n;if(o!=null){const i=o,l=r.Compare(s,G(i))|0;if(l===0)return R(ee(i));if(i instanceof B){t=r,e=s,n=l<0?L(i):V(i);continue e}else return}else return}}function al(t,e,n){const r=Rs(t,e,n);if(r==null)throw new Error;return k(r)}function fl(t,e,n){e:for(;;){const r=t,s=e,o=n;if(o!=null){const i=o,l=r.Compare(s,G(i))|0;if(i instanceof B)if(l<0){t=r,e=s,n=L(i);continue e}else{if(l===0)return!0;t=r,e=s,n=V(i);continue e}else return l===0}else return!1}}function Hs(t,e){e:for(;;){const n=t,r=e;if(r!=null){const s=r;if(s instanceof B){Hs(n,L(s)),n(G(s),ee(s)),t=n,e=V(s);continue e}else n(G(s),ee(s))}break}}function hl(t,e){Hs(t,e)}function dl(t,e,n){let r=n;hl((s,o)=>{e[r]=[s,o],r=r+1|0},t)}function gl(t,e){return rt((n,r)=>Ft(t,r[0],r[1],n),xt(),e)}function pl(t,e,n){e:for(;;){const r=t,s=e,o=n;if(o["System.Collections.IEnumerator.MoveNext"]()){const i=o["System.Collections.Generic.IEnumerator`1.get_Current"]();t=r,e=Ft(r,i[0],i[1],s),n=o;continue e}else return s}}function _l(t,e){let n=xt();for(let r=0;r<=e.length-1;r++){const s=e[r];n=Ft(t,s[0],s[1],n)}return n}function wl(t,e){if(we(e))return _l(t,e);if(e instanceof Se)return gl(t,e);{const n=x(e);try{return pl(t,xt(),n)}finally{n.Dispose()}}}class ml extends ue{constructor(e,n){super();this.stack=e,this.started=n}}function Gs(t){e:for(;;){const e=t;if(m(e))return F();{const n=y(e),r=g(e);if(r!=null){const s=r;if(s instanceof B){t=I([L(s),xn(G(s),ee(s)),V(s)],n);continue e}else return e}else{t=n;continue e}}}}function Ls(t){return new ml(Gs(Ze(t)),!1)}function yl(){throw new Error("enumeration not started")}function El(){throw new Error("enumeration already finished")}function Vs(t){if(t.started){const e=t.stack;if(m(e))return El();if(g(e)!=null){const n=g(e);if(n instanceof B)throw new Error("Please report error: Map iterator, unexpected stack for current");return[G(n),ee(n)]}else throw new Error("Please report error: Map iterator, unexpected stack for current")}else return yl()}function Sl(t){if(t.started){const e=t.stack;if(m(e))return!1;if(g(e)!=null){if(g(e)instanceof B)throw new Error("Please report error: Map iterator, unexpected stack for moveNext");return t.stack=Gs(y(e)),!m(t.stack)}else throw new Error("Please report error: Map iterator, unexpected stack for moveNext")}else return t.started=!0,!m(t.stack)}function Us(t){let e=Ls(t);return{["System.Collections.Generic.IEnumerator`1.get_Current"](){return Vs(e)},["System.Collections.IEnumerator.get_Current"](){return Vs(e)},["System.Collections.IEnumerator.MoveNext"](){return Sl(e)},["System.Collections.IEnumerator.Reset"](){e=Ls(t)},Dispose(){}}}class kt{constructor(e,n){this.comparer=e,this.tree=n}GetHashCode(){return $l(this)|0}Equals(e){const n=this;if(e instanceof kt){const r=x(n);try{const s=x(e);try{const o=()=>{const i=r["System.Collections.IEnumerator.MoveNext"]();if(i===s["System.Collections.IEnumerator.MoveNext"]())if(i){const l=r["System.Collections.Generic.IEnumerator`1.get_Current"](),c=s["System.Collections.Generic.IEnumerator`1.get_Current"]();return J(l[0],c[0])&&J(l[1],c[1])?o():!1}else return!0;else return!1};return o()}finally{s.Dispose()}}finally{r.Dispose()}}else return!1}toString(){return"map ["+An("; ",$(n=>qr("({0}, {1})",n[0],n[1]),this))+"]"}get[Symbol.toStringTag](){return"FSharpMap"}toJSON(e){const n=this;return Array.from(n)}GetEnumerator(){return Us(this.tree)}[Symbol.iterator](){return Wt(this.GetEnumerator())}["System.Collections.IEnumerable.GetEnumerator"](){return Us(this.tree)}CompareTo(e){const n=this;if(e instanceof kt)return vc((r,s)=>{const o=n.comparer.Compare(r[0],s[0])|0;return(o!==0?o:le(r[1],s[1]))|0},n,e)|0;throw new Error("not comparable\\nParameter name: obj")}["System.Collections.Generic.ICollection`1.Add2B595"](e){throw new Error("Map cannot be mutated")}["System.Collections.Generic.ICollection`1.Clear"](){throw new Error("Map cannot be mutated")}["System.Collections.Generic.ICollection`1.Remove2B595"](e){throw new Error("Map cannot be mutated")}["System.Collections.Generic.ICollection`1.Contains2B595"](e){const n=this;return qs(n,e[0])&&J(js(n,e[0]),e[1])}["System.Collections.Generic.ICollection`1.CopyToZ2E171D71"](e,n){dl(this.tree,e,n)}["System.Collections.Generic.ICollection`1.get_IsReadOnly"](){return!0}["System.Collections.Generic.ICollection`1.get_Count"](){return dr(this)|0}["System.Collections.Generic.IReadOnlyCollection`1.get_Count"](){return dr(this)|0}get size(){return dr(this)|0}clear(){throw new Error("Map cannot be mutated")}delete(e){throw new Error("Map cannot be mutated")}entries(){return $(n=>[n[0],n[1]],this)}get(e){return js(this,e)}has(e){return qs(this,e)}keys(){return $(n=>n[0],this)}set(e,n){throw new Error("Map cannot be mutated")}values(){return $(n=>n[1],this)}forEach(e,n){const r=this;z(s=>{e(s[1],s[0],r)},r)}}function fr(t,e){return new kt(t,e)}(()=>{kt.empty=fr(Yr(),xt())})();function bl(){return kt.empty}function Cl(t){const e=Yr();return fr(e,wl(e,t))}function hr(t,e,n){return fr(t.comparer,Ft(t.comparer,e,n,t.tree))}function js(t,e){return al(t.comparer,e,t.tree)}function dr(t){return ul(t.tree)}function qs(t,e){return fl(t.comparer,e,t.tree)}function vl(t,e){return Rs(t.comparer,e,t.tree)}function $l(t){const e=(s,o)=>(s<<1)+o+631;let n=0;const r=x(t);try{for(;r["System.Collections.IEnumerator.MoveNext"]();){const s=r["System.Collections.Generic.IEnumerator`1.get_Current"]();n=e(n,me(s[0]))|0,n=e(n,me(s[1]))|0}}finally{r.Dispose()}return n|0}function zs(t,e,n){return hr(n,t,e)}function Ws(t){return $(e=>[e[0],e[1]],t)}function Ml(t){return Cl(t)}function Al(){return bl()}class Zs{constructor(e){this.k=e}}function te(t){return new Zs(t)}function _(t){return t.k}class E extends Zs{constructor(e,n,r,s){super(e);this.left=n,this.right=r,this.h=s|0}}function ne(t,e,n,r){return new E(t,e,n,r)}function v(t){return t.left}function C(t){return t.right}function Bt(t){return t.h}function S(){}function Ks(t,e){e:for(;;){const n=t,r=e;if(n!=null){const s=n;if(s instanceof E){t=v(s),e=Ks(C(s),r+1);continue e}else return r+1|0}else return r|0}}function Xs(t){return Ks(t,0)}function Ce(t,e,n){let r;const s=t;if(s!=null){const c=s;r=c instanceof E?Bt(c):1}else r=0;let o;const i=n;if(i!=null){const c=i;o=c instanceof E?Bt(c):1}else o=0;const l=(r<o?o:r)|0;return l===0?te(e):ne(e,t,n,l+1)}function Ys(t,e,n){let r,s,o,i,l;const c=t;if(c!=null){const h=c;l=h instanceof E?Bt(h):1}else l=0;let u;const a=n;if(a!=null){const h=a;u=h instanceof E?Bt(h):1}else u=0;if(u>l+2){const h=k(n);if(h instanceof E)if(r=v(h),(r!=null?(s=r,s instanceof E?Bt(s):1):0)>l+1){const f=k(v(h));if(f instanceof E)return Ce(Ce(t,e,v(f)),_(f),Ce(C(f),_(h),C(h)));throw new Error("internal error: Set.rebalance")}else return Ce(Ce(t,e,v(h)),_(h),C(h));else throw new Error("internal error: Set.rebalance")}else if(l>u+2){const h=k(t);if(h instanceof E)if(o=C(h),(o!=null?(i=o,i instanceof E?Bt(i):1):0)>u+1){const f=k(C(h));if(f instanceof E)return Ce(Ce(v(h),_(h),v(f)),_(f),Ce(C(f),e,n));throw new Error("internal error: Set.rebalance")}else return Ce(v(h),_(h),Ce(C(h),e,n));else throw new Error("internal error: Set.rebalance")}else return Ce(t,e,n)}function Dt(t,e,n){if(n!=null){const r=n,s=t.Compare(e,_(r))|0;if(r instanceof E)return s<0?Ys(Dt(t,e,v(r)),_(r),C(r)):s===0?n:Ys(v(r),_(r),Dt(t,e,C(r)));{const o=t.Compare(e,_(r))|0;return o<0?ne(e,S(),n,2):o===0?n:ne(e,n,S(),2)}}else return te(e)}function Js(t,e,n){e:for(;;){const r=t,s=e,o=n;if(o!=null){const i=o,l=r.Compare(s,_(i))|0;if(i instanceof E)if(l<0){t=r,e=s,n=v(i);continue e}else{if(l===0)return!0;t=r,e=s,n=C(i);continue e}else return l===0}else return!1}}function Qs(t,e){e:for(;;){const n=t,r=e;if(r!=null){const s=r;if(s instanceof E){Qs(n,v(s)),n(_(s)),t=n,e=C(s);continue e}else n(_(s))}break}}class Il extends ue{constructor(e,n){super();this.stack=e,this.started=n}}function eo(t){e:for(;;){const e=t;if(m(e))return F();{const n=g(e),r=y(e);if(n!=null){const s=n;if(s instanceof E){t=I([v(s),te(_(s)),C(s)],r);continue e}else return e}else{t=r;continue e}}}}function to(t){return new Il(eo(Ze(t)),!1)}function Pl(){throw new Error("Enumeration not started")}function Tl(){throw new Error("Enumeration already started")}function no(t){if(t.started){const e=t.stack;if(m(e))return Tl();if(g(e)!=null){const n=g(e);return _(n)}else throw new Error("Please report error: Set iterator, unexpected stack for current")}else return Pl()}function Nl(t){if(t.started){const e=t.stack;if(m(e))return!1;if(g(e)!=null){if(g(e)instanceof E)throw new Error("Please report error: Set iterator, unexpected stack for moveNext");return t.stack=eo(y(e)),!m(t.stack)}else throw new Error("Please report error: Set iterator, unexpected stack for moveNext")}else return t.started=!0,!m(t.stack)}function ro(t){let e=to(t);return{["System.Collections.Generic.IEnumerator`1.get_Current"](){return no(e)},["System.Collections.IEnumerator.get_Current"](){return no(e)},["System.Collections.IEnumerator.MoveNext"](){return Nl(e)},["System.Collections.IEnumerator.Reset"](){e=to(t)},Dispose(){}}}function xl(t,e,n){e:for(;;){const r=t,s=e,o=n,i=[s,o];if(m(i[0]))return m(i[1])?0:-1;if(m(i[1]))return 1;if(g(i[1])!=null)if(g(i[0])!=null){const l=g(i[0]),c=g(i[1]);if(l instanceof E)if(v(l)==null)if(c instanceof E)if(v(c)==null){const u=r.Compare(_(l),_(c))|0;if(u!==0)return u|0;t=r,e=W(C(l),y(i[0])),n=W(C(c),y(i[1]));continue e}else{const u=[s,o];let a,h,f,d,p;switch(m(u[0])?m(u[1])?a=2:g(u[1])!=null?(a=1,d=y(u[1]),p=g(u[1])):a=2:g(u[0])!=null?(a=0,h=y(u[0]),f=g(u[0])):m(u[1])?a=2:g(u[1])!=null?(a=1,d=y(u[1]),p=g(u[1])):a=2,a){case 0:if(f instanceof E){t=r,e=I([v(f),ne(_(f),S(),C(f),0)],h),n=o;continue e}else{t=r,e=I([S(),te(_(f))],h),n=o;continue e}case 1:if(p instanceof E){t=r,e=s,n=I([v(p),ne(_(p),S(),C(p),0)],d);continue e}else{t=r,e=s,n=I([S(),te(_(p))],d);continue e}case 2:throw new Error("unexpected state in SetTree.compareStacks")}}else{const u=r.Compare(_(l),_(c))|0;if(u!==0)return u|0;t=r,e=W(C(l),y(i[0])),n=W(S(),y(i[1]));continue e}else{const u=[s,o];let a,h,f,d,p;switch(m(u[0])?m(u[1])?a=2:g(u[1])!=null?(a=1,d=y(u[1]),p=g(u[1])):a=2:g(u[0])!=null?(a=0,h=y(u[0]),f=g(u[0])):m(u[1])?a=2:g(u[1])!=null?(a=1,d=y(u[1]),p=g(u[1])):a=2,a){case 0:if(f instanceof E){t=r,e=I([v(f),ne(_(f),S(),C(f),0)],h),n=o;continue e}else{t=r,e=I([S(),te(_(f))],h),n=o;continue e}case 1:if(p instanceof E){t=r,e=s,n=I([v(p),ne(_(p),S(),C(p),0)],d);continue e}else{t=r,e=s,n=I([S(),te(_(p))],d);continue e}case 2:throw new Error("unexpected state in SetTree.compareStacks")}}else if(c instanceof E)if(v(c)==null){const u=r.Compare(_(l),_(c))|0;if(u!==0)return u|0;t=r,e=W(S(),y(i[0])),n=W(C(c),y(i[1]));continue e}else{const u=[s,o];let a,h,f,d,p;switch(m(u[0])?m(u[1])?a=2:g(u[1])!=null?(a=1,d=y(u[1]),p=g(u[1])):a=2:g(u[0])!=null?(a=0,h=y(u[0]),f=g(u[0])):m(u[1])?a=2:g(u[1])!=null?(a=1,d=y(u[1]),p=g(u[1])):a=2,a){case 0:if(f instanceof E){t=r,e=I([v(f),ne(_(f),S(),C(f),0)],h),n=o;continue e}else{t=r,e=I([S(),te(_(f))],h),n=o;continue e}case 1:if(p instanceof E){t=r,e=s,n=I([v(p),ne(_(p),S(),C(p),0)],d);continue e}else{t=r,e=s,n=I([S(),te(_(p))],d);continue e}case 2:throw new Error("unexpected state in SetTree.compareStacks")}}else{const u=r.Compare(_(l),_(c))|0;if(u!==0)return u|0;t=r,e=y(i[0]),n=y(i[1]);continue e}}else{g(i[1]);const l=[s,o];let c,u,a,h,f;switch(m(l[0])?m(l[1])?c=2:g(l[1])!=null?(c=1,h=y(l[1]),f=g(l[1])):c=2:g(l[0])!=null?(c=0,u=y(l[0]),a=g(l[0])):m(l[1])?c=2:g(l[1])!=null?(c=1,h=y(l[1]),f=g(l[1])):c=2,c){case 0:if(a instanceof E){t=r,e=I([v(a),ne(_(a),S(),C(a),0)],u),n=o;continue e}else{t=r,e=I([S(),te(_(a))],u),n=o;continue e}case 1:if(f instanceof E){t=r,e=s,n=I([v(f),ne(_(f),S(),C(f),0)],h);continue e}else{t=r,e=s,n=I([S(),te(_(f))],h);continue e}case 2:throw new Error("unexpected state in SetTree.compareStacks")}}else if(g(i[0])!=null){g(i[0]);const l=[s,o];let c,u,a,h,f;switch(m(l[0])?m(l[1])?c=2:g(l[1])!=null?(c=1,h=y(l[1]),f=g(l[1])):c=2:g(l[0])!=null?(c=0,u=y(l[0]),a=g(l[0])):m(l[1])?c=2:g(l[1])!=null?(c=1,h=y(l[1]),f=g(l[1])):c=2,c){case 0:if(a instanceof E){t=r,e=I([v(a),ne(_(a),S(),C(a),0)],u),n=o;continue e}else{t=r,e=I([S(),te(_(a))],u),n=o;continue e}case 1:if(f instanceof E){t=r,e=s,n=I([v(f),ne(_(f),S(),C(f),0)],h);continue e}else{t=r,e=s,n=I([S(),te(_(f))],h);continue e}case 2:throw new Error("unexpected state in SetTree.compareStacks")}}else{t=r,e=y(i[0]),n=y(i[1]);continue e}break}}function so(t,e,n){return e==null?n==null?0:-1:n==null?1:xl(t,Ze(e),Ze(n))|0}function oo(t,e,n){let r=n;Qs(s=>{e[r]=s,r=r+1|0},t)}function Fl(t){const e=Xs(t)|0,n=zn(new Array(e),0,e,null);return oo(t,n,0),n}function kl(t,e,n){e:for(;;){const r=t,s=e,o=n;if(o["System.Collections.IEnumerator.MoveNext"]()){t=r,e=Dt(r,o["System.Collections.Generic.IEnumerator`1.get_Current"](),s),n=o;continue e}else return s}}function Bl(t,e){return nc((n,r)=>Dt(t,r,n),S(),e)}function Dl(t,e){return rt((n,r)=>Dt(t,r,n),S(),e)}function io(t,e){if(we(e))return Bl(t,e);if(e instanceof Se)return Dl(t,e);{const n=x(e);try{return kl(t,S(),n)}finally{n.Dispose()}}}class gr{constructor(e,n){this.comparer=e,this.tree=n}GetHashCode(){return Gl(this)|0}Equals(e){const n=this;return e instanceof gr&&so(Ot(n),fe(n),fe(e))===0}toString(){return"set ["+An("; ",$(n=>ye(n),this))+"]"}get[Symbol.toStringTag](){return"FSharpSet"}toJSON(e){const n=this;return Array.from(n)}CompareTo(e){const n=this;return so(Ot(n),fe(n),fe(e))|0}["System.Collections.Generic.ICollection`1.Add2B595"](e){throw new Error("ReadOnlyCollection")}["System.Collections.Generic.ICollection`1.Clear"](){throw new Error("ReadOnlyCollection")}["System.Collections.Generic.ICollection`1.Remove2B595"](e){throw new Error("ReadOnlyCollection")}["System.Collections.Generic.ICollection`1.Contains2B595"](e){const n=this;return Js(Ot(n),e,fe(n))}["System.Collections.Generic.ICollection`1.CopyToZ2E171D71"](e,n){oo(fe(this),e,n)}["System.Collections.Generic.ICollection`1.get_IsReadOnly"](){return!0}["System.Collections.Generic.ICollection`1.get_Count"](){return Bn(this)|0}["System.Collections.Generic.IReadOnlyCollection`1.get_Count"](){return Bn(this)|0}GetEnumerator(){return ro(fe(this))}[Symbol.iterator](){return Wt(this.GetEnumerator())}["System.Collections.IEnumerable.GetEnumerator"](){return ro(fe(this))}get size(){return Bn(this)|0}add(e){throw new Error("Set cannot be mutated")}clear(){throw new Error("Set cannot be mutated")}delete(e){throw new Error("Set cannot be mutated")}has(e){return co(this,e)}keys(){return $(n=>n,this)}values(){return $(n=>n,this)}entries(){return $(n=>[n,n],this)}forEach(e,n){const r=this;z(s=>{e(s,s,r)},r)}}function kn(t,e){return new gr(t,e)}function Ot(t){return t.comparer}function fe(t){return t.tree}function Ol(t){return kn(t,S())}function Rl(t,e){return kn(Ot(t),Dt(Ot(t),e,fe(t)))}function Bn(t){return Xs(fe(t))}function co(t,e){return Js(Ot(t),e,fe(t))}function Hl(t){return Fl(fe(t))}function Gl(t){let e,n=0;const r=x(t);try{for(;r["System.Collections.IEnumerator.MoveNext"]();){const s=r["System.Collections.Generic.IEnumerator`1.get_Current"]();n=(e=me(s)|0,(n<<1)+e+631|0)}}finally{r.Dispose()}return Math.abs(n)|0}function lo(t,e){return co(e,t)}function Ll(t,e){return Rl(e,t)}function Vl(t){return Ol(t)}function Ul(t){return Bn(t)}function jl(t,e){return kn(e,io(e,t))}function ql(t){return Hl(t)}function zl(t,e){return kn(e,io(e,t))}class Xe extends Ee{constructor(e,...n){super();this.tag=e|0,this.fields=n}cases(){return["Cyan","Blue","Orange","Yellow","Green","Purple","Red","Gray"]}}class Dn extends Ee{constructor(e,...n){super();this.tag=e|0,this.fields=n}cases(){return["Fragment","Ghost"]}}class he extends ue{constructor(e,n){super();this.X=e|0,this.Y=n|0}}function un(t,e){return new he(t.X+e.X,t.Y+e.Y)}const pr=10,Wl=24;class He extends Ee{constructor(e,...n){super();this.tag=e|0,this.fields=n}cases(){return["I","L","Z","S","T","J","O","\u039B"]}}const uo=jl(H([new He(0),new He(1),new He(2),new He(3),new He(4),new He(5),new He(6)]),{Compare:(t,e)=>le(t,e)});class Pe extends Ee{constructor(e,...n){super();this.tag=e|0,this.fields=n}cases(){return["Up","Right","Down","Left"]}}class Ye extends ue{constructor(e){super();this.Color=e}}function _r(t){switch(t.tag){case 5:return new Ye(new Xe(1));case 1:return new Ye(new Xe(2));case 6:return new Ye(new Xe(3));case 3:return new Ye(new Xe(4));case 4:return new Ye(new Xe(5));case 2:return new Ye(new Xe(6));case 7:return new Ye(new Xe(7));default:return new Ye(new Xe(0))}}function On(t,e){return $(n=>{let r;const s=n,o=s[0]|0,i=s[1]|0;switch(t.tag){case 1:{r=[Ut(i),o];break}case 2:{r=[Ut(o),Ut(i)];break}case 3:{r=[i,Ut(o)];break}default:r=[o,i]}return new he(r[0],r[1])},Sc(e.tag===5?H([[0,0],[-1,0],[0,-1],[0,-2]]):e.tag===1?H([[0,0],[1,0],[0,-1],[0,-2]]):e.tag===6?H([[0,0],[0,1],[1,1],[1,0]]):e.tag===3?H([[1,0],[0,0],[0,1],[-1,1]]):e.tag===4?H([[0,0],[0,-1],[-1,0],[1,0]]):e.tag===2?H([[-1,0],[0,0],[0,1],[1,1]]):e.tag===7?H([[-1,-1],[0,0],[-1,1],[1,1],[-2,2],[2,2]]):H([[0,0],[0,-1],[0,1],[0,-2]])))}class an extends ue{constructor(e,n,r){super();this.Tetromino=e,this.Position=n,this.Rotation=r}}class fn extends Ee{constructor(e,...n){super();this.tag=e|0,this.fields=n}cases(){return["Locked","Unlocked"]}}class ao extends ue{constructor(e,n){super();this.Ticks=e,this.DropFrequency=n}}class ve extends ue{constructor(e,n,r,s,o,i,l){super();this.Paused=e,this.PlacedBoard=n,this.ActivePiece=r,this.HoldPiece=s,this.EligiblePieces=o,this.QueuedPieces=i,this.Clock=l}}class fo extends Ee{constructor(e,...n){super();this.tag=e|0,this.fields=n}cases(){return["Clockwise","CounterClockwise"]}}function Zl(t){return t.tag===1?e=>e.tag===1?new Pe(0):e.tag===2?new Pe(1):e.tag===3?new Pe(2):new Pe(3):e=>e.tag===1?new Pe(2):e.tag===2?new Pe(3):e.tag===3?new Pe(0):new Pe(1)}class Ge extends Ee{constructor(e,...n){super();this.tag=e|0,this.fields=n}cases(){return["Drop","HardDrop","Hold","UpdatePosition","OffsetPosition","UpdateRotation"]}}class U extends Ee{constructor(e,...n){super();this.tag=e|0,this.fields=n}cases(){return["Tick","TogglePaused","TriggerRestart","LambdaMode","UpdateActivePiece"]}}class ho extends ue{constructor(e,n){super();this.bound=e|0,this.digits=n}}function go(t,e){e:for(;;){const n=t,r=e;if(r===0)return 1;if(r%2==0){t=n*n,e=~~(r/2);continue e}else return n*go(n*n,~~(r/2))|0}}P(2013265921,0,!1),P(2013265921,0,!0),bt(29-1,t=>go(2,t),Int32Array);function wr(t){return t.bound}function hn(t,e){return t.digits[e]}function mr(t,e){return N(hn(t,e),!1,2)}function Rn(t,e,n){t.digits[e]=n|0}function yr(t,e){e:for(;;){const n=t,r=e;if(r===0)return P(1,0,!1);if(r%2==0){t=ce(n,n),e=~~(r/2);continue e}else return ce(n,yr(ce(n,n),~~(r/2)))}}function Rt(t,e){e:for(;;){const n=t,r=e;if(r===0)return 1;if(r%2==0){t=n*n,e=~~(r/2);continue e}else return n*Rt(n*n,~~(r/2))|0}}function Kl(t){let e=0;for(let n=0;n<=t.bound-1;n++)e=t.digits[n]+(e<<3)|0;return e|0}const Ht=24,it=16777216,Te=P(16777216,0,!1),Gt=P(16777215,0,!1);P(16777215,0,!0);function ct(t){return new ho(t,new Int32Array(t))}function Xl(t){return new ho(t.bound,tc(t.digits))}function Ne(t){const n=((r,s)=>{e:for(;;){const o=r,i=s;if(i===-1?!0:o[i]!==0)return i+1|0;r=o,s=i-1;continue e}})(t.digits,t.bound-1)|0;return t.bound=n|0,t}const po=2,_o=3;function dn(t){const e=(t<0?0:t)|0;if(e<it){const n=ct(1);return n.digits[0]=e|0,Ne(n)}else{const n=ct(po);for(let r=0;r<=po-1;r++)n.digits[r]=~~(e/Rt(it,r))%it|0;return Ne(n)}}function Yl(t){const e=Sn(t,P(0,0,!1))<0?P(0,0,!1):t,n=ct(_o);for(let r=0;r<=_o-1;r++)n.digits[r]=~~Me(Br(Be(e,yr(Te,r)),Te))|0;return Ne(n)}function Jl(t){if(t.bound===1)return t.digits[0]|0;{let e=0;for(let n=t.bound-1;n>=0;n--)e=t.digits[n]+it*e|0;return e|0}}const Ql=dn(1),eu=dn(0);function Z(t){return t.bound-1}function j(t){return t.bound===0}function wo(t,e){return t.bound===e.bound?((r,s,o)=>{e:for(;;){const i=r,l=s,c=o;if(c===-1)return!0;if(i[c]===l[c]){r=i,s=l,o=c-1;continue e}else return!1}})(t.digits,e.digits,t.bound-1):!1}function tu(t,e,n,r){return t.bound+e<n.bound+r?-1:t.bound+e>n.bound+e?1:((o,i,l)=>{e:for(;;){const c=o,u=i,a=l;if(a===-1)return 0;{const h=(a<e?0:c[a-e])|0,f=(a<r?0:u[a-r])|0;if(h===f){o=c,i=u,l=a-1;continue e}else return h<f?-1:1}}})(t.digits,n.digits,t.bound+e-1)|0}function nu(t,e){return t.bound<e.bound?-1:t.bound>e.bound?1:((r,s,o)=>{e:for(;;){const i=r,l=s,c=o;if(c===-1)return 0;if(i[c]===l[c]){r=i,s=l,o=c-1;continue e}else return i[c]<l[c]?-1:1}})(t.digits,e.digits,t.bound-1)|0}function mo(t,e){return nu(t,e)===-1}function ru(t,e){const n=ct(2),r=ce(N(t,!1,2),N(e,!1,2));return Rn(n,0,~~Me(_t(r,Gt))),Rn(n,1,~~Me(Be(r,Te))),Ne(n)}function yo(t,e,n){e:for(;;){const r=t,s=e,o=n;if(Sn(s,P(0,0,!1))>0){const i=Y(mr(r,o),s);Rn(r,o,~~Me(_t(i,Gt))),t=r,e=Be(i,Te),n=o+1;continue e}break}}function Eo(t,e){const n=wr(t)|0,r=ct(n+1),s=N(e,!1,2);let o=P(0,0,!1);for(let i=0;i<=n-1;i++){const l=Y(Y(o,mr(r,i)),ce(mr(t,i),s));Rn(r,i,~~Me(_t(l,Gt))),o=Be(l,Te)}return yo(r,o,n),Ne(r)}function su(t,e){const n=ct(t.bound+e.bound),r=n.digits;for(let s=0;s<=t.bound-1;s++){const o=N(t.digits[s],!1,2);let i=P(0,0,!1),l=s;for(let c=0;c<=e.bound-1;c++){const u=N(e.digits[c],!1,2),a=Y(Y(N(r[l],!1,2),i),ce(o,u));r[l]=~~Me(_t(a,Gt))|0,i=Be(a,Te),l=l+1|0}yo(n,i,l)}return Ne(n)}function ou(t,e){const n=wr(t)===1,r=wr(e)===1;return n&&r?ru(hn(t,0),hn(e,0)):n?Eo(e,hn(t,0)):r?Eo(t,hn(e,0)):su(t,e)}class iu extends ue{constructor(e,n,r,s,o,i,l){super();this.bigL=e|0,this.twoToBigL=n|0,this.k=r|0,this.bigK=s|0,this.bigN=o|0,this.split=i|0,this.splits=l}}function re(t,e,n,r){return new iu(t,Rt(2,t),e,n,r,~~(Ht/t),bt(~~(Ht/t),s=>Rt(2,t*s),Int32Array))}const cu=[re(1,28,268435456,268435456),re(2,26,67108864,134217728),re(3,24,16777216,50331648),re(4,22,4194304,16777216),re(5,20,1048576,5242880),re(6,18,262144,1572864),re(7,16,65536,458752),re(8,14,16384,131072),re(9,12,4096,36864),re(10,10,1024,10240),re(11,8,256,2816),re(12,6,64,768),re(13,4,16,208)];bt(Ht,t=>Rt(2,t)-1,Int32Array),bt(Ht,t=>Rt(2,t),Int32Array),bt(Ht,t=>yr(P(2,0,!1),t)),~~(cu[0].bigN/Ht);function lu(t,e){return ou(t,e)}function uu(t,e,n,r){const s=[t.digits,Z(t)],o=s[0],i=[n.digits,Z(n)],l=i[1]|0,c=i[0],u=N(e,!1,2);let a=0,h=ce(u,N(c[0],!1,2));for(;Sn(h,P(0,0,!1))>0?!0:a<l;){if(a>s[1])throw new Error("scaleSubInPlace: pre-condition did not apply, result would be -ve");let f=~~Me(_t(h,Gt)),d=Be(h,Te);f<=o[a+r]?o[a+r]=o[a+r]-f|0:(o[a+r]=o[a+r]+(it-f)|0,d=Y(d,P(1,0,!1))),a<l?h=Y(d,ce(u,N(c[a+1],!1,2))):h=d,a=a+1|0}Ne(t)}function au(t,e,n,r){const s=[t.digits,Z(t)],o=s[0],i=[n.digits,Z(n)],l=i[1]|0,c=i[0],u=N(e,!1,2);let a=0,h=ce(u,N(c[0],!1,2));for(;Sn(h,P(0,0,!1))>0?!0:a<l;){if(a>s[1])throw new Error("scaleSubInPlace: pre-condition did not apply, result would be -ve");let f=~~Me(_t(h,Gt)),d=Be(h,Te);f<it-o[a+r]?o[a+r]=o[a+r]+f|0:(o[a+r]=f-(it-o[a+r])|0,d=Y(d,P(1,0,!1))),a<l?h=Y(d,ce(u,N(c[a+1],!1,2))):h=d,a=a+1|0}Ne(t)}function fu(t,e,n){const r=[Z(e),Z(t)],s=r[1]|0,o=r[0]|0;if(s<o+n)return 0;{const i=[e.digits,t.digits],l=i[1],c=i[0],u=(o===0?s===n?~~(l[n]/c[0]):~~Me(Be(Y(ce(N(l[s],!1,2),Te),N(l[s-1],!1,2)),N(c[0],!1,2))):s===o+n?~~(l[s]/(c[o]+1)):~~Me(Be(Y(ce(N(l[s],!1,2),Te),N(l[s-1],!1,2)),Y(N(c[o],!1,2),P(1,0,!1)))))|0;return u===0?tu(e,n,t,0)!==1?1:0:u|0}}function hu(t,e){if(j(e))throw new Error;if(Z(t)<Z(e))return[eu,t];{const n=Xl(t),r=ct(Z(t)-Z(e)+1+1);let s=Z(t);const o=Z(e)|0;let i=s-o,l=!1;for(;!l;){const c=fu(n,e,i)|0;c>0?(uu(n,c,e,i),au(r,c,Ql,i)):(l=c===0&&i===0,l||(s===o+i?i=i-1|0:(i=i-1|0,s=s-1|0)))}return[Ne(r),Ne(n)]}}dn(2);function Er(t){return dn(t)}function du(t){return Yl(t)}function So(t){const e=Z(t)|0,n=(o,i,l)=>{e:for(;;){const c=o,u=i,a=l;if(Z(a)>e)return W([u,a],c);o=W([u,a],c),i=u+1,l=lu(a,a);continue e}},r=(o,i,l,c)=>{e:for(;;){const u=o,a=i,h=l,f=c;if(m(f)){const d=Jl(h)|0;return u&&d===0?a:W(pi(d),a)}else{const d=y(f),p=hu(h,g(f)[1]),w=p[1],T=p[0];if(u&&j(T)){o=u,i=a,l=w,c=d;continue e}else{o=u,i=r(!1,a,w,d),l=T,c=d;continue e}}}},s=r(!0,F(),t,n(F(),0,dn(10)));return m(s)?"0":An("",en(s))}function gu(t){return t.bound<=1}function bo(t){const e=t,n=0;return n<e.bound?e.digits[n]|0:0}class de extends ue{constructor(e,n){super();this.signInt=e|0,this.v=n}toString(){const e=this;switch(lt(e)|0){case-1:return j(A(e))?"0":"-"+So(A(e));case 0:return"0";case 1:return So(A(e));default:throw new Error("signs should be +/- 1 or 0")}}Equals(e){const n=this;return e instanceof de&&Co(n,e)}GetHashCode(){return wu(this)|0}toJSON(e){return ye(this)}CompareTo(e){const n=this;if(e instanceof de)return _u(n,e)|0;throw new Error("the objects are not comparable\\nParameter name: obj")}}function Sr(t,e){return new de(t,e)}(()=>{de.smallLim=4096,de.smallPosTab=bt(de.smallLim,t=>Er(t)),de.one=Cr(1),de.two=Cr(2),de.zero=Cr(0)})();function br(t){return gu(t)&&bo(t)<de.smallLim?de.smallPosTab[bo(t)]:t}function lt(t){return t.signInt}function A(t){return t.v}function Co(t,e){const n=[lt(t),lt(e)];let r;switch(n[0]===-1?n[1]===-1?r=1:n[1]===0?r=8:n[1]===1?r=3:r=9:n[0]===0?n[1]===-1?r=6:n[1]===0?r=4:n[1]===1?r=5:r=9:n[0]===1?n[1]===-1?r=2:n[1]===0?r=7:n[1]===1?r=0:r=9:r=9,r){case 0:return wo(A(t),A(e));case 1:return wo(A(t),A(e));case 2:return j(A(t))?j(A(e)):!1;case 3:return j(A(t))?j(A(e)):!1;case 4:return!0;case 5:return j(A(e));case 6:return j(A(e));case 7:return j(A(t));case 8:return j(A(t));case 9:throw new Error("signs should be +/- 1 or 0\\nParameter name: x")}}function pu(t,e){const n=[lt(t),lt(e)];let r;switch(n[0]===-1?n[1]===-1?r=1:n[1]===0?r=8:n[1]===1?r=3:r=9:n[0]===0?n[1]===-1?r=6:n[1]===0?r=4:n[1]===1?r=5:r=9:n[0]===1?n[1]===-1?r=2:n[1]===0?r=7:n[1]===1?r=0:r=9:r=9,r){case 0:return mo(A(t),A(e));case 1:return mo(A(e),A(t));case 2:return!1;case 3:return j(A(t))?!j(A(e)):!0;case 4:return!1;case 5:return!j(A(e));case 6:return!1;case 7:return!1;case 8:return!j(A(t));case 9:throw new Error("signs should be +/- 1 or 0\\nParameter name: x")}}function _u(t,e){return pu(t,e)?-1:Co(t,e)?0:1}function wu(t){return lt(t)===0?1:lt(t)+Kl(A(t))|0}function Cr(t){return t>=0?Sr(1,br(Er(t))):t===-2147483648?Sr(-1,br(du(li(N(t,!1,2))))):Sr(-1,br(Er(Ut(t))))}function mu(t,e,n,r){const s=le(t,n)|0;if(s===0)throw new Error("The step of a range cannot be zero");const o=s>0;return i=>{const l=le(i,e)|0;return(o&&l<=0?!0:!o&&l>=0)?[i,r(i,t)]:void 0}}function yu(t,e,n,r,s){const o=mu(e,n,r,s);return ae(()=>yc(o,t))}function Lt(t,e,n){return yu(t,e,n,0,(r,s)=>r+s)}function Eu(){return Ml(ae(()=>Yn(t=>$(e=>[new he(e,t),void 0],Lt(0,1,pr-1)),Lt(0,1,Wl-1))))}function vo(t){return ql(t)[Ci(0,Ul(t))]}function $o(t){return new an(t,new he(~~(pr/2)-1,2),new Pe(0))}function Hn(t,e){let n;if(m(e)){const r=bc(ae(()=>Yn(s=>es(vo(t)),Lt(0,1,5))));n=[g(r),y(r)]}else n=[g(e),Rc(y(e),Ze(vo(t)))];return[$o(n[0]),n[1]]}const Mo=(()=>{const t=Hn(uo,F());return new ve(!1,Eu(),t[0],new fn(1,void 0),uo,t[1],new ao(P(0,0,!1),P(75,0,!1)))})();function Su(t){document.addEventListener("keydown",e=>{console.log("KEYDOWN");let n;switch(e.code){case"KeyP":{n=new U(1);break}case"Escape":{n=new U(1);break}case"KeyR":{n=new U(2);break}case"KeyL":{n=new U(3);break}case"Space":{n=new U(4,new Ge(1));break}case"KeyC":{n=new U(4,new Ge(2));break}case"ArrowUp":{n=new U(4,new Ge(5,new fo(0)));break}case"KeyZ":{n=new U(4,new Ge(5,new fo(1)));break}case"ArrowRight":{n=new U(4,new Ge(4,new he(1,0)));break}case"ArrowDown":{n=new U(4,new Ge(0));break}case"ArrowLeft":{n=new U(4,new Ge(4,new he(-1,0)));break}default:n=void 0}n==null||t(n)})}function gn(t,e){return!rs(!1,$(n=>Ji(Qi(r=>r==null,vl(t,n)),!1),$(n=>un(e.Position,n),On(e.Rotation,e.Tetromino))),{Equals:(n,r)=>n===r,GetHashCode:n=>me(n)})}function bu(t){const e=Ze(n=>{const r=25*.1;return window.setTimeout(()=>{n(new U(0))},r)});if(t.Paused)return[t,e];{const n=t.Clock,r=Y(n.Ticks,P(1,0,!1)),s=new ve(t.Paused,t.PlacedBoard,t.ActivePiece,t.HoldPiece,t.EligiblePieces,t.QueuedPieces,new ao(r,t.Clock.DropFrequency)),o=ui(Br(r,n.DropFrequency),P(0,0,!1))?i=>{i(new U(4,new Ge(0)))}:void 0;return[s,o==null?e:W(o,e)]}}function Ao(t,e){let n;e:for(;;){const r=t,s=e,o=new an(s.Tetromino,(n=s.Position,new he(n.X,n.Y+1)),s.Rotation);if(gn(r,o)){t=r,e=o;continue e}else return s}}function Io(t,e){const n=e.Tetromino,r=new Dn(0,_r(n).Color);return Re((s,o)=>hr(s,o,r),t,$(s=>un(e.Position,s),On(e.Rotation,n)))}function Po(t){const e=Nc(r=>r[0],ks(r=>r[0].Y,Ws(t),{Equals:(r,s)=>r===s,GetHashCode:r=>Zt(r)}),{Compare:(r,s)=>Cn(r,s)}),n=Gc(Re((r,s)=>rs(void 0,$(o=>o[1],s[1]),{Equals:(o,i)=>J(o,i),GetHashCode:o=>me(o)})?r:W(s[0],r),F(),e),{Compare:(r,s)=>Cn(r,s)});return Re((r,s)=>Re((o,i)=>zs(new he(i,s),void 0,o),r,Lt(0,1,pr-1)),Re(Un(2,r=>{const s=r[0]|0,o=r[1],i=r[2];return l=>!m(o)&&l[0]===g(o)?[s+1,y(o),i]:[s,o,Re((c,u)=>{const a=u[0];return zs(new he(a.X,a.Y+s),u[1],c)},i,l[1])]}),[0,n,Al()],e)[2],Lt(0,1,kc(n)))}function Cu(t,e){let n,r,s,o,i,l,c,u,a,h;if(t.tag===1)return[new ve(!e.Paused,e.PlacedBoard,e.ActivePiece,e.HoldPiece,e.EligiblePieces,e.QueuedPieces,e.Clock),F()];if(t.tag===2)return[Mo,F()];if(t.tag===3)return[new ve(e.Paused,e.PlacedBoard,e.ActivePiece,e.HoldPiece,Ll(new He(7),e.EligiblePieces),e.QueuedPieces,e.Clock),F()];if(t.tag===4){if(e.Paused)return[e,F()];if(t.fields[0].tag===1)return[(n=Po(Io(e.PlacedBoard,Ao(e.PlacedBoard,e.ActivePiece))),r=Hn(e.EligiblePieces,e.QueuedPieces),new ve(e.Paused,n,r[0],(s=e.HoldPiece,s.tag===1?e.HoldPiece:new fn(1,s.fields[0])),e.EligiblePieces,r[1],e.Clock)),F()];if(t.fields[0].tag===2)return[(o=e.HoldPiece,o.tag===1?(i=o.fields[0],i==null?(l=Hn(e.EligiblePieces,e.QueuedPieces),new ve(e.Paused,e.PlacedBoard,l[0],new fn(0,e.ActivePiece.Tetromino),e.EligiblePieces,l[1],e.Clock)):new ve(e.Paused,e.PlacedBoard,$o(i),new fn(0,e.ActivePiece.Tetromino),e.EligiblePieces,e.QueuedPieces,e.Clock)):e),F()];if(t.fields[0].tag===3){let f;const d=e.ActivePiece;return f=new an(d.Tetromino,t.fields[0].fields[0],d.Rotation),[gn(e.PlacedBoard,f)?new ve(e.Paused,e.PlacedBoard,f,e.HoldPiece,e.EligiblePieces,e.QueuedPieces,e.Clock):e,F()]}else{if(t.fields[0].tag===4)return[e,Uc(new U(4,new Ge(3,un(e.ActivePiece.Position,t.fields[0].fields[0]))))];if(t.fields[0].tag===5){let f;const d=e.ActivePiece;return f=new an(d.Tetromino,d.Position,Zl(t.fields[0].fields[0])(e.ActivePiece.Rotation)),[gn(e.PlacedBoard,f)?new ve(e.Paused,e.PlacedBoard,f,e.HoldPiece,e.EligiblePieces,e.QueuedPieces,e.Clock):e,F()]}else if(gn(e.PlacedBoard,e.ActivePiece)){let f;const d=e.ActivePiece;return f=new an(d.Tetromino,(c=e.ActivePiece.Position,new he(c.X,c.Y+1)),d.Rotation),[gn(e.PlacedBoard,f)?new ve(e.Paused,e.PlacedBoard,f,e.HoldPiece,e.EligiblePieces,e.QueuedPieces,e.Clock):(u=Po(Io(e.PlacedBoard,e.ActivePiece)),a=Hn(e.EligiblePieces,e.QueuedPieces),new ve(e.Paused,u,a[0],(h=e.HoldPiece,h.tag===1?e.HoldPiece:new fn(1,h.fields[0])),e.EligiblePieces,a[1],e.Clock)),F()]}else return[e,F()]}}else return bu(e)}function vu(){return[Mo,H([t=>{t(new U(0))},t=>{Su(t)}])]}function $u(t){return{Dispose(){t()}}}function Mu(t,e){setTimeout(e,t)}function To(t){Mu(0,t)}class No extends Ee{constructor(e,...n){super();this.tag=e|0,this.fields=n}cases(){return["OnConnected","OnRender"]}}class xo{constructor(e){this["host@80"]=e,this._firstRun=!0,this._rendering=!1,this._args=[],this._stateIndex=0,this._effectIndex=0,this._states=[],this._effects=[],this._disposables=[]}get host(){return this["host@80"]}fail(){throw new Error("Hooks must be called consistently for each render call")}requestUpdate(){this["host@80"].requestUpdate()}renderWith(e){const n=this;if(n._firstRun?!0:!rc((r,s)=>J(r,s),e,n._args))return n._args=e,n.render()}render(){const e=this;e._stateIndex=0,e._effectIndex=0,e._rendering=!0;const n=e["host@80"].renderFn.apply(e["host@80"],e._args);return!e._firstRun&&(e._stateIndex!==e._states.length?!0:e._effectIndex!==e._effects.length)&&e.fail(),e._rendering=!1,e["host@80"].isConnected&&e.runEffects(e._firstRun,!0),e._firstRun=!1,n}checkRendering(){const e=this;e._rendering||e.fail()}runEffects(e,n){const r=this;To(()=>{z(s=>{s.tag===0?e&&r._disposables.push(s.fields[0]()):n&&s.fields[0]()},r._effects)})}setState(e,n,r){let s,o;const i=this;s=n,o=i._states[e],!(vn(2,r)==null?J(o,s):r(o,s))&&(i._states[e]=n,i._rendering?To(()=>{i["host@80"].requestUpdate()}):i["host@80"].requestUpdate())}getState(){const e=this;e._stateIndex>=e._states.length&&e.fail();const n=e._stateIndex|0;return e._stateIndex=n+1|0,[n,e._states[n]]}addState(e){const n=this;return n._states.push(e),[n._states.length-1,e]}disconnect(){const e=this;let n=x(e._disposables);try{for(;n["System.Collections.IEnumerator.MoveNext"]();)n["System.Collections.Generic.IEnumerator`1.get_Current"]().Dispose()}finally{n.Dispose()}vi(e._disposables)}useState(e){const n=this;n.checkRendering();const r=n._firstRun?n.addState(e()):n.getState();return[r[1],s=>{n.setState(r[0],s)}]}useRef(e){const n=this;return n.checkRendering(),n._firstRun?n.addState(new Mn(e()))[1]:n.getState()[1]}setEffect(e){const n=this;if(n.checkRendering(),n._firstRun)n._effects.push(e);else{n._effectIndex>=n._effects.length&&n.fail();const r=n._effectIndex|0;n._effectIndex=r+1|0,n._effects[r]=e}}useEffect(e){this.setEffect(new No(1,e))}useEffectOnce(e){this.setEffect(new No(0,e))}}function Au(t,e){return t.useRef(e).contents}function Iu(t){if(t==null?!0:!(t.hooks instanceof xo))throw new Error("Cannot access hook context, make sure the hook is called on top of a HookComponent function");return t.hooks}function Pu(t){return $u(t)}function Fo(t){return t!=null}function ko(){throw new Error("LitElement.init must be called on top of the render function")}function Tu(t){throw new Error(`'${t}' field in \`props\` record is not of Prop<'T> type`)}class Bo{constructor(e,n){this.defaultValue=e,this.options=n}}class Nu extends Bo{constructor(e,n){super(e,n);this.defaultValue_1=e}}function xu(t,e){return new Nu(t,e)}function Fu(t){return[t.defaultValue,t.options]}function ku(t,e,n,r,s,o){return xu(t,Gr(i=>{let l;z(a=>{i.type=a},We((l=t,typeof l=="string"?R(String):typeof l=="number"||typeof l=="number"?R(Number):typeof l=="boolean"?R(Boolean):void 0))),z(a=>{i.reflect=a},We(o)),z(Mi(a=>{i.hasChanged=vn(2,a)},[[0,2]]),We(vn(2,n))),z(a=>{const h=a.trim();switch(h){case null:case"":{i.attribute=!1;break}default:i.attribute=h}},We(e));const c=[r,s];let u;switch(c[0]!=null||c[1]!=null?u=0:u=1,u){case 0:{i.converter=Gr(a=>{z(h=>{a.fromAttribute=h},We(r)),z(h=>{a.toAttribute=h},We(s))});break}}}))}class Bu{constructor(){this._initPromise=null,this._useShadowDom=!0,this._props=null,this._styles=null}get props(){return this._props}set props(e){const n=this;n._props=e}get styles(){return this._styles}set styles(e){const n=this;n._styles=e}get useShadowDom(){return this._useShadowDom}set useShadowDom(e){const n=this;n._useShadowDom=e}init(e){const n=this;return n._initPromise=e(n),[null,null]}get hooks(){return ko()}}function Du(){return new Bu}function Do(t){return t._initPromise}class Ou extends cn{constructor(e){super();this._hooks=new xo(this),e(this)}render(){return this._hooks.render()}disconnectedCallback(){const e=this;super.disconnectedCallback(),e._hooks.disconnect()}init(e){const n=this;return[n,n]}get hooks(){return this._hooks}}class Ru extends Ri{constructor(e){super();this.name=e}Decorate(e){const n=this,r=Du();if(e.length>0)throw new Error("Render function for LitElement cannot take arguments");try{e.apply(r,[])}catch{}return Do(r)==null&&ko(),Do(r).then(()=>{let o;const i=r,l=Fo(i.styles)?en(i.styles):void 0;let c;if(Fo(i.props)){const a=[],h={};z(f=>{const d=f[0];let p;const w=f[1];p=w instanceof Bo?Fu(w):Tu(d);const T=p[0];h[d]=p[1],T!=null&&a.push([d,T])},(o=Object.values(i.props),Pc(Object.keys(i.props),o))),c=[R(h),f=>{z(d=>{f[d[0]]=d[1]},a)}]}else c=[void 0,a=>{}];const u=class extends Ou{constructor(){super(c[1])}get renderFn(){return e}};z(a=>{Object.defineProperty(u,"properties",{get:()=>a})},We(c[0])),z(a=>{Object.defineProperty(u,"styles",{get:()=>a})},We(l)),i.useShadowDom||(u.prototype.createRenderRoot=function(){return this}),customElements.define(n.name,u)}),()=>{throw new Error(`${n.name} is not immediately callable, it must be created in HTML`)}}}class Vt extends Ee{constructor(e,...n){super();this.tag=e|0,this.fields=n}cases(){return["Writable","ReadWritable"]}}class Hu{constructor(e){this.state=new Vt(0,zn(new Array(Hr((n,r)=>Cn(n,r),e,10)),0,Hr((n,r)=>Cn(n,r),e,10),null),0)}}function Gu(t){return new Hu(t)}function Lu(t){const e=t.state;if(e.tag===1){const n=e.fields[1]|0,r=e.fields[2]|0,s=e.fields[0],o=(r+1)%s.length|0;return o===n?t.state=new Vt(0,s,n):t.state=new Vt(1,s,n,o),R(s[r])}else return}function Vu(t,e){const n=t.state;if(n.tag===1){const r=n.fields[1]|0,s=n.fields[2]|0,o=n.fields[0];o[r]=e;const i=(r+1)%o.length|0;i===s?t.state=new Vt(1,Uu(t,s,o),o.length,0):t.state=new Vt(1,o,i,s)}else{const r=n.fields[1]|0,s=n.fields[0];s[r]=e;const o=(r+1)%s.length|0;t.state=new Vt(1,s,o,r)}}function Uu(t,e,n){return Array.from(ae(()=>ns(Ac(e,n),ae(()=>ns(Ic(e,n),ae(()=>Yn(r=>es(null),Lt(0,1,n.length))))))))}class Oo extends ue{constructor(e,n,r,s,o,i,l){super();this.init=e,this.update=n,this.subscribe=r,this.view=s,this.setState=o,this.onError=i,this.syncDispatch=l}}function ju(t,e,n){return new Oo(t,e,r=>us(),n,(r,s)=>{n(r,s)},r=>{Lc(r[0],r[1])},Un(2,r=>r))}function qu(t,e){return new Oo(e.init,e.update,e.subscribe,e.view,t,e.onError,e.syncDispatch)}function zu(t,e){const n=e.init(t),r=n[0],s=Gu(10);let o=!1,i=r;const l=u=>{if(o)Vu(s,u);else{o=!0;let a=R(u);for(;a!=null;){const h=k(a);try{const f=e.update(h,i),d=f[0];e.setState(d,c),ls(p=>{e.onError([mt(wt("Error in command while handling: %A"))(h),p])},c,f[1]),i=d}catch(f){e.onError([mt(wt("Unable to process the message: %A"))(h),f])}a=Lu(s)}o=!1}},c=$i(1,e.syncDispatch,[l]);e.setState(r,c),ls(u=>{e.onError(["Error intitializing:",u])},c,Vc(H([(()=>{try{return e.subscribe(r)}catch(u){return e.onError(["Unable to subscribe:",u]),us()}})(),n[1]])))}function Wu(t){zu(void 0,t)}function Zu(t,e){return ju(t,e,(n,r)=>{})}class Ku{constructor(){this.state=void 0,this.listener=void 0,this.dispatcher=void 0}}function Xu(){return new Ku}function Yu(t){return t.state}function Ju(t,e,n){t.state=R(e),t.dispatcher=n;const r=t.listener;r!=null&&r(e)}function Qu(t,e){const n=t.dispatcher;n!=null&&n(e)}function ea(t,e){t.listener==null&&(t.listener=e)}function ta(t,e){const n=Au(t,Xu),r=t.useState(()=>{Wu(qu((i,l)=>{Ju(n,i,l)},e()));const o=Yu(n);if(o!=null)return k(o);throw new Error("Elmish program has not initialized")}),s=r[0];return t.useEffectOnce(()=>Pu(()=>{const o=s;di(o)&&o.Dispose()})),ea(n,r[1]),[s,o=>{Qu(n,o)}]}function Ro(t){if(t.tag===1)return"ghost";switch(t.fields[0].tag){case 1:return"blue";case 2:return"orange";case 3:return"yellow";case 4:return"green";case 5:return"purple";case 6:return"red";case 7:return"gray";default:return"cyan"}}function na(t,e){let n;const r=e==null?"empty":Ro(e);return n=mt(wt("cell %s"))(r),Q(q`
    <div data-col=${t.X} class=${n}></div>
    `)}function ra(t){const e=ks(n=>n[0].Y,Tc(n=>{const r=n[0];return[r.Y,r.X]},Ws(t),{Compare:(n,r)=>Vn(n,r)}),{Equals:(n,r)=>n===r,GetHashCode:n=>Zt(n)});return Q(q`
    <div class="board main">
    ${er($(n=>Q(q`
    <div data-row="${n[0]}" class="row" >
    ${er($(r=>na(r[0],r[1]),n[1]))}
    </div>
    `),e))}
    </div>
    `)}class Ho extends Ee{constructor(e,...n){super();this.tag=e|0,this.fields=n}cases(){return["TetroPiece","GhostPiece"]}}function Go(t,e){let n;if(e.tag===1)n=[e.fields[0].Position,e.fields[0].Rotation,e.fields[0].Tetromino,new Dn(1)];else{const r=e.fields[0].Tetromino;n=[e.fields[0].Position,e.fields[0].Rotation,r,new Dn(0,_r(r).Color)]}return Re((r,s)=>{const o=un(n[0],s);return(o.X<0?!0:o.Y<0)?r:hr(r,o,n[3])},t,On(n[1],n[2]))}const Lo=6;function Vo(t,e,n){let r,s;const o=n==null?Vl({Compare:(i,l)=>le(i,l)}):zl($((r=new he(2,2),i=>un(r,i)),On(new Pe(0),n)),{Compare:(i,l)=>le(i,l)});return s=cs(Lo,i=>Q(q`
    <div class="row" >
    ${cs(Lo,l=>{let c;const u=[n,lo(new he(l,i),o)];let a,h;switch(u[0]!=null&&u[1]?(a=0,h=u[0]):a=1,a){case 0:{c=Ro(new Dn(0,_r(h).Color));break}case 1:{c="empty";break}}const f=mt(wt("%ipx"))(e);return Q(q`<div style="width:${f}; height:${f}" class=${"cell "+c}></div>`)})}
    </div>
    `)),Q(q`
    <div class=${mt(wt("board %s"))(t)}>
    ${s}
    </div>
    `)}function sa(t){return Vo("hold",15,(t.tag===1,t.fields[0]))}function oa(t){const e=H([["L",t?"\u03BB mode enabled":"???"],["R","restart"],["Esc/P","pause"],["Up","rotate CW"],["Right","move right"],["Left","move left"],["Down","move down"],["Space","hard drop"],["C","hold"],["Z","rotate CCW"]]);return Q(q`
    <ul class="board info" style="margin-top: 15px;">
    ${rt((n,r)=>{let s;const o=r[0];return W((s=o==="L"?"color:#ff5252":"",Q(q`
        <li style="${s}" >${o} -
        <span class="description" style="${s}" >${r[1]}</span>
        </li>
        `)),n)},F(),e)}
    </ul>
    `)}const ia=Q(q`
<div class="board info">
<a href="https://github.com/jamieday/FunkyTetris">View on GitHub</a>
<a style="margin-top:5px"  href="http://jamieday.ca">More stuff</a>
</div>
`);function ca(t){const e=Q(q`<hr />`);return Q(q`
    <div class="queued">
    ${Dc((n,r)=>W(Vo("queued",10,n),m(r)?F():W(e,r)),t,F())}
    </div>
    `)}function la(t,e){const n=Q(q`
    <div class="info">
    ${sa(t.HoldPiece)}
    ${oa(lo(new He(7),t.EligiblePieces))}
    ${ia}
    </div>
    `),r=ra(Go(Go(t.PlacedBoard,new Ho(1,Ao(t.PlacedBoard,t.ActivePiece))),new Ho(0,t.ActivePiece))),s=ca(t.QueuedPieces);let o;const i=t.Paused?"paused":"active";return o=mt(wt("game %s"))(i),Q(q`
    <div class="${o}" style="margin-left: 2rem;">
    ${n}
    ${r}
    ${s}
    </div>
    `)}new Ru("evilz-tetris").Decorate(function(){this.init(e=>{const n=e;return n.useShadowDom=!1,n.props={initial:ku(0)},n.styles=Ze(il(q`
        :host {
        background-color: #555;
        color: #4a4a4a;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        display: block;
        }
        .root-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        }
        .game {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        }
        `)),Promise.resolve(void 0)});const t=ta(Iu(this),()=>Zu(vu,(e,n)=>Cu(e,n)));return la(t[0])});function ua(){}Je.registerTetris=ua,Object.defineProperty(Je,"__esModule",{value:!0}),Je[Symbol.toStringTag]="Module"});
